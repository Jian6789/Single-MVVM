{"version":3,"sources":["webpack:///webpack/bootstrap d6fb0c502cb7a167cff1","webpack:///./src/main/index.js","webpack:///./src/vm/index.js","webpack:///./src/common/common.js","webpack:///./src/observe/index.js","webpack:///./src/dep/index.js","webpack:///./src/watcher/index.js","webpack:///./src/compile/index.js","webpack:///./src/directive/index.js","webpack:///./src/directive/forDir.js","webpack:///./src/directive/ifDir.js","webpack:///./src/ajax/index.js"],"names":["Single","Routers","VM","page","ajax","me","window","addEventListener","urlChange","router","getRouter","loadTemplate","tempUrl","ctrUrl","curURL","getURL","location","hash","split","url","script","document","createElement","src","async","onload","body","removeChild","appendChild","type","success","result","getElementById","innerHTML","loadScript","options","$opts","$data","data","$observe","$compile","el","isObject","isPlainObj","isArray","isFun","err","isEleNode","isAttrNode","isTextNode","toArray","isDir","isEventDir","isForDir","insertAfter","regText","val","undefined","Object","prototype","toString","call","Array","str","Error","node","nodeType","slice","indexOf","newNode","target","parent","parentNode","lastElementChild","insertBefore","nextSibling","Observe","walk","hadProperty","getOwnPropertyDescriptor","keys","forEach","key","set","convert","value","ob","children","dep","defineProperty","configurable","enumerable","get","addDep","newVal","notify","uid","Dep","id","sub","watcher","push","reg","filter","item","$keys","match","isArr","rmSub","update","Watcher","vm","fn","$vm","_fn","depIds","getVal","hasOwnProperty","addSub","Compile","isDel","$isDel","$el","querySelector","frag","node2Fragment","analyEleNode","createDocumentFragment","child","firstChild","childNodes","analyArrtNode","test","textContent","text","RegExp","$1","trim","length","attrs","attributes","attrName","attr","name","dirName","dirVal","event","changHtml","dirUnit","_bind","if","for","html","class","model","_data","oldVal","_getVal","ev","_setVal","dir","bind","upper","_keys","len","i","textUpper","replace","htmlUpper","modelUpper","classUpper","className","createRange","createContextualFragment","ForDir","start","end","init","arrName","createComment","removeAttribute","arr","outerHTML","box","IfDir","jsonpId","aD","encodeFormat","header","saD","ajaxJsonp","re","XMLHttpRequest","open","toUpperCase","setRequestHeader","readyState","response","send","obj","reduce","ao","jsonp","fnName","global","remove"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;ACtCA;;AAGA;;AAGA;;;;KAIMA,M;AACL,oBAAc;AAAA;;AACb,QAAKC,OAAL,GAAe,EAAf;AACA,QAAKC,EAAL;AACA,QAAKC,IAAL,GAAY,IAAZ;AACA,QAAKC,IAAL;AACA,OAAIC,KAAK,IAAT;AACAC,UAAOC,gBAAP,CAAwB,MAAxB,EAAgC,YAAW;AAC1CF,OAAGG,SAAH;AACA,IAFD;AAGAF,UAAOC,gBAAP,CAAwB,YAAxB,EAAsC,YAAW;AAChDF,OAAGG,SAAH;AACA,IAFD;AAGA;;;;+BAEW;AACX,QAAIC,SAAS,KAAKC,SAAL,EAAb;AACA,QAAGD,MAAH,EAAU;AACT,UAAKE,YAAL,CAAkBF,OAAOG,OAAzB,EAAiCH,OAAOI,MAAxC;AACA;AACD;;;+BAEW;AACX,QAAIC,SAAS,KAAKC,MAAL,EAAb;AAAA,QACCN,SAAS,KAAKR,OAAL,CAAaa,MAAb,CADV;AAEA,WAAOL,SAASA,MAAT,GAAkB,KAAKR,OAAL,CAAa,CAAb,CAAzB;AACA;;;4BAEQ;AACR,WAAOe,SAASC,IAAT,CAAcC,KAAd,CAAoB,GAApB,EAAyB,CAAzB,EAA4BA,KAA5B,CAAkC,GAAlC,EAAuC,CAAvC,CAAP;AACA;;;8BAEUC,G,EAAK;AACf,QAAIC,SAASC,SAASC,aAAT,CAAuB,QAAvB,CAAb;AAAA,QACCjB,KAAK,IADN;AAEAe,WAAOG,GAAP,GAAaJ,GAAb;AACAC,WAAOI,KAAP,GAAe,IAAf;AACAJ,WAAOK,MAAP,GAAgB,YAAW;AAC1BJ,cAASK,IAAT,CAAcC,WAAd,CAA0BP,MAA1B;AACA,SAAG,mBAAMf,GAAGF,IAAT,CAAH,EAAkB;AACjBE,SAAGF,IAAH;AACA;AACD,KALD;AAMAkB,aAASK,IAAT,CAAcE,WAAd,CAA0BR,MAA1B;AACA;;;gCAEYR,O,EAAQC,M,EAAQ;AAC5B,QAAIR,KAAK,IAAT;AACAA,OAAGD,IAAH,CAAQ;AACPyB,WAAM,KADC;AAEPV,UAAKP,OAFE;AAGPY,YAAM,KAHC;AAIPM,cAAS,iBAASC,MAAT,EAAiB;AACzBV,eAASW,cAAT,CAAwB,QAAxB,EAAkCC,SAAlC,GAA8CF,MAA9C;AACA1B,SAAG6B,UAAH,CAAcrB,MAAd;AACA;AAPM,KAAR;AASA;;;;;;AAGFP,QAAON,MAAP,GAAgB,IAAIA,MAAJ,EAAhB,C;;;;;;;;;;;;;ACtEA;;AACA;;AACA;;;;AAEA;;;KAGaE,E,WAAAA,E,GACZ,YAAYiC,OAAZ,EAAqB;AAAA;;AACpB,OAAKC,KAAL,GAAaD,OAAb;AACA,OAAKE,KAAL,GAAaF,QAAQG,IAArB;AACA,MAAI,mBAAMH,OAAN,CAAJ,EAAoB;AACnBA,WAAQG,IAAR,GAAeH,QAAQG,IAAR,EAAf;AACA,GAAC,KAAKC,QAAL,GAAgB,mBAAYJ,QAAQG,IAApB,CAAhB;;AAEF,OAAKE,QAAL,GAAgB,oBAAYL,QAAQM,EAAR,IAAcpB,SAASK,IAAnC,EAAyC,IAAzC,CAAhB;AACA,E;;;;;;;;;;;;;;SCdcgB,Q,GAAAA,Q;SAOAC,U,GAAAA,U;SAIAC,O,GAAAA,O;SAIAC,K,GAAAA,K;SAIAC,G,GAAAA,G;SAIAC,S,GAAAA,S;SAIAC,U,GAAAA,U;SAIAC,U,GAAAA,U;SAIAC,O,GAAAA,O;SAIAC,K,GAAAA,K;SAIAC,U,GAAAA,U;SAIAC,Q,GAAAA,Q;SAIAC,W,GAAAA,W;AArDT,KAAIC,4BAAU,cAAd;;AAEA,UAASb,QAAT,CAAkBc,GAAlB,EAAuB;AAC7B,MAAGA,OAAOC,SAAV,EAAoB;AACnB,UAAO,KAAP;AACA;AACD,SAAO,QAAOD,GAAP,yCAAOA,GAAP,OAAe,QAAtB;AACA;;AAEM,UAASb,UAAT,CAAoBa,GAApB,EAAyB;AAC/B,SAAOE,OAAOC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BL,GAA/B,MAAwC,iBAA/C;AACA;;AAEM,UAASZ,OAAT,CAAiBY,GAAjB,EAAsB;AAC5B,SAAOM,MAAMlB,OAAN,CAAcY,GAAd,CAAP;AACA;;AAEM,UAASX,KAAT,CAAeW,GAAf,EAAoB;AAC1B,SAAO,OAAOA,GAAP,KAAe,UAAtB;AACA;;AAEM,UAASV,GAAT,CAAaiB,GAAb,EAAkB;AACxB,QAAM,IAAIC,KAAJ,CAAUD,GAAV,CAAN;AACA;;AAEM,UAAShB,SAAT,CAAmBkB,IAAnB,EAAyB;AAC/B,SAAOA,KAAKC,QAAL,KAAkB,CAAzB;AACA;;AAEM,UAASlB,UAAT,CAAoBiB,IAApB,EAA0B;AAChC,SAAOA,KAAKC,QAAL,KAAkB,CAAzB;AACA;;AAEM,UAASjB,UAAT,CAAoBgB,IAApB,EAA0B;AAChC,SAAOA,KAAKC,QAAL,KAAkB,CAAzB;AACA;;AAEM,UAAShB,OAAT,CAAiBM,GAAjB,EAAsB;AAC5B,SAAO,GAAGW,KAAH,CAASN,IAAT,CAAcL,GAAd,CAAP;AACA;;AAEM,UAASL,KAAT,CAAeY,GAAf,EAAoB;AAC1B,SAAOA,IAAIK,OAAJ,CAAY,IAAZ,MAAsB,CAA7B;AACA;;AAEM,UAAShB,UAAT,CAAoBW,GAApB,EAAyB;AAC/B,SAAOA,IAAIK,OAAJ,CAAY,IAAZ,MAAsB,CAA7B;AACA;;AAEM,UAASf,QAAT,CAAkBU,GAAlB,EAAuB;AAC7B,SAAOA,IAAIK,OAAJ,CAAY,KAAZ,MAAuB,CAA9B;AACA;;AAEM,UAASd,WAAT,CAAqBe,OAArB,EAA8BC,MAA9B,EAAsC;AAC5C,MAAIC,SAASD,OAAOE,UAApB;AACA,MAAID,OAAOE,gBAAP,IAA2BH,MAA/B,EAAuC;AACtCC,UAAO3C,WAAP,CAAmByC,OAAnB;AACA,GAFD,MAEO;AACNE,UAAOG,YAAP,CAAoBL,OAApB,EAA6BC,OAAOK,WAApC;AACA;AACD,E;;;;;;;;;;;;;;;AC5DD;;AACA;;AACA;;;;AAEA;;;KAGaC,O,WAAAA,O;AACT,sBAAYtC,IAAZ,EAAkB;AAAA;;AACd,aAAI,CAAC,sBAASA,IAAT,CAAL,EAAqB;AACjB;AACH;AACD,cAAKuC,IAAL,CAAUvC,IAAV;AACH;;AAEJ;;;;;;;;8BAIQA,I,EAAM;AACP,iBAAIjC,KAAK,IAAT;AAAA,iBACIyE,cAAcpB,OAAOqB,wBADzB;AAEArB,oBAAOsB,IAAP,CAAY1C,IAAZ,EAAkB2C,OAAlB,CAA0B,UAAUC,GAAV,EAAe;AACrC,qBAAI,mBAAMJ,YAAYxC,IAAZ,EAAkB4C,GAAlB,EAAuBC,GAA7B,CAAJ,EAAuC;AACnC;AACH;AACD9E,oBAAG+E,OAAH,CAAW9C,IAAX,EAAiB4C,GAAjB,EAAsB5C,KAAK4C,GAAL,CAAtB;AACH,cALD;AAMH;;AAEJ;;;;;;;;;iCAMW5C,I,EAAM4C,G,EAAKG,K,EAAO;AACtB,iBAAIC,KAAK,IAAT;AAAA,iBACIC,WAAW,IAAIX,OAAJ,CAAYS,KAAZ,CADf;AAAA,iBAEIG,MAAM,gBAFV;AAGA9B,oBAAO+B,cAAP,CAAsBnD,IAAtB,EAA4B4C,GAA5B,EAAiC;AAC7BQ,+BAAc,KADe;AAE7BC,6BAAY,IAFiB;AAG7BC,sBAAK,eAAY;AACb,uCAAU,eAAOC,MAAP,CAAcL,GAAd,CAAV;AACA,4BAAOH,KAAP;AACH,kBAN4B;AAO7BF,sBAAK,aAAUW,MAAV,EAAkB;AACnB,yBAAIT,SAASS,MAAb,EAAqB;AACjB;AACH;AACDT,6BAAQS,MAAR;AACAP,gCAAW,IAAIX,OAAJ,CAAYkB,MAAZ,CAAX;AACAN,yBAAIO,MAAJ,CAAW,qBAAQD,MAAR,CAAX;AACH;AAd4B,cAAjC;AAgBH;;;;;;;;;;;;;;;;;;;;ACtDL,KAAIE,MAAM,CAAV;;AAEA;;;;KAGaC,G,WAAAA,G;AACT,oBAAc;AAAA;;AACV,cAAKC,EAAL,GAAUF,KAAV;AACA,cAAKG,GAAL,GAAW,EAAX;AACH;;AAEJ;;;;;;;;gCAIUC,O,EAAS;AACZ,kBAAKD,GAAL,CAASE,IAAT,CAAcD,OAAd;AACH;;;+BAEKD,G,EAAK;AACP,iBAAIG,MAAM,YAAV;AACA,oBAAOH,IAAII,MAAJ,CAAW,UAACC,IAAD,EAAQ;AACtB,wBAAO,CAACA,KAAKC,KAAL,CAAWC,KAAX,CAAiBJ,GAAjB,CAAR;AACH,cAFM,CAAP;AAGH;AACJ;;;;;;kCAGY;AACLhC,oBAAOuB,MAAP,CAAc,IAAd;AACH;;AAEJ;;;;;;gCAGUc,K,EAAO;AACV,iBAAGA,KAAH,EAAS;AACL,sBAAKR,GAAL,GAAW,KAAKS,KAAL,CAAW,KAAKT,GAAhB,CAAX;AACH;AACD,kBAAKA,GAAL,CAASlB,OAAT,CAAiB,UAACuB,IAAD,EAAU;AACvBA,sBAAKK,MAAL;AACH,cAFD;AAGH;;;;;;;;;;;;;;;;;;;;AC5CE,KAAIvC,0BAAS,IAAb;;AAEP;;;;KAGawC,O,WAAAA,O;AACZ,mBAAYC,EAAZ,EAAgB/B,IAAhB,EAAsBgC,EAAtB,EAA0B;AAAA;;AACzB,QAAKC,GAAL,GAAWF,EAAX;AACA,QAAKN,KAAL,GAAazB,IAAb;AACA,QAAKkC,GAAL,GAAWF,EAAX;AACA,QAAKG,MAAL,GAAc,EAAd;AACA,QAAK3D,GAAL,GAAW,KAAKoC,GAAL,EAAX;AACA;;AAED;;;;;;;yBAGM;AACL,YAlBStB,MAkBT,YAAS,IAAT;AACA,QAAId,MAAM,KAAK4D,MAAL,EAAV;AACA,YApBS9C,MAoBT,YAAS,IAAT;AACA,WAAOd,GAAP;AACA;;AAED;;;;;;4BAGS;AACR,QAAIwB,OAAO,KAAKyB,KAAL,CAAWvF,KAAX,CAAiB,GAAjB,CAAX;AAAA,QACCsC,MAAM,KAAKyD,GAAL,CAAS5E,KADhB;AAEA2C,SAAKC,OAAL,CAAa,UAACC,GAAD,EAAS;AACrB1B,WAAMA,IAAI0B,GAAJ,CAAN;AACA,KAFD;AAGA,WAAO1B,GAAP;AACA;;AAED;;;;;;;0BAIOgC,G,EAAK;AACX,QAAI,CAAC,KAAK2B,MAAL,CAAYE,cAAZ,CAA2B7B,IAAIU,EAA/B,CAAL,EAAyC;AACxC,UAAKiB,MAAL,CAAY3B,IAAIU,EAAhB,IAAsBV,GAAtB;AACAA,SAAI8B,MAAJ,CAAW,IAAX;AACA;AACD;;AAED;;;;;;4BAGS;AACR,QAAIxB,SAAS,KAAKF,GAAL,EAAb;AAAA,QACCpC,MAAM,KAAKA,GADZ;AAEA,QAAIA,OAAOsC,MAAX,EAAmB;AAClB;AACA;AACD,SAAKtC,GAAL,GAAWsC,MAAX;AACA,SAAKoB,GAAL,CAASrD,IAAT,CAAc,KAAKoD,GAAnB,EAAwBnB,MAAxB,EAAgCtC,GAAhC,EAAqC,IAArC;AACA;;;;;;;;;;;;;;;;;;;AC1DF;;AASA;;;;KAKa+D,O,WAAAA,O;AACZ,mBAAY9E,EAAZ,EAAgBsE,EAAhB,EAAoBS,KAApB,EAA2B;AAAA;;AAC1B,QAAKP,GAAL,GAAWF,EAAX;AACA,QAAK3E,KAAL,GAAa,KAAK6E,GAAL,CAAS7E,KAAtB;AACA,QAAKC,KAAL,GAAa,KAAKD,KAAL,CAAWE,IAAxB;AACA,QAAKmF,MAAL,GAAcD,SAAS,KAAvB;AACA,QAAKE,GAAL,GAAWjF,GAAGyB,QAAH,GAAczB,EAAd,GAAmBpB,SAASsG,aAAT,CAAuBlF,EAAvB,CAA9B;;AAEA,OAAI,KAAKiF,GAAT,EAAc;AACb,QAAIE,OAAO,KAAKC,aAAL,CAAmB,KAAKH,GAAxB,CAAX;AACA,SAAKI,YAAL,CAAkBF,IAAlB;AACA,SAAKF,GAAL,CAAS9F,WAAT,CAAqBgG,IAArB;AACA;AACD;;AAED;;;;;;;;iCAIc3D,I,EAAM;AACnB,QAAI2D,OAAOvG,SAAS0G,sBAAT,EAAX;AAAA,QACCC,cADD;AAEA,WAAOA,QAAQ/D,KAAKgE,UAApB,EAAgC;AAC/BL,UAAKhG,WAAL,CAAiBoG,KAAjB;AACA;AACD,WAAOJ,IAAP;AACA;;AAID;;;;;;;;gCAKanF,E,EAAI;AAChB,QAAIuF,QAAQvF,GAAGyF,UAAf;AAAA,QACC7H,KAAK,IADN;AAEA,yBAAQ2H,KAAR,EAAe/C,OAAf,CAAuB,UAAChB,IAAD,EAAU;AAChC,SAAI,uBAAUA,IAAV,CAAJ,EAAqB;AAAE;AACtB5D,SAAG8H,aAAH,CAAiBlE,IAAjB;AACA,MAFD,MAEO,IAAI,wBAAWA,IAAX,KAAoB,gBAAQmE,IAAR,CAAanE,KAAKoE,WAAlB,CAAxB,EAAwD;AAC9D,qBAAQC,IAAR,CAAarE,IAAb,EAAmB5D,GAAG4G,GAAtB,EAA2BsB,OAAOC,EAAP,CAAUC,IAAV,EAA3B;AACA;AACD,SAAIxE,KAAKO,UAAL,IAAmBP,KAAKiE,UAAxB,IAAsCjE,KAAKiE,UAAL,CAAgBQ,MAAhB,GAAyB,CAAC,CAApE,EAAuE;AACtErI,SAAGyH,YAAH,CAAgB7D,IAAhB;AACA;AACD,KATD;AAUA;;AAED;;;;;;;;iCAKcA,I,EAAM;AACnB,QAAI0E,QAAQ1E,KAAK2E,UAAjB;AAAA,QACCvI,KAAK,IADN;AAAA,QAECwI,WAAW,EAFZ;;AAIA,yBAAQF,KAAR,EAAe1D,OAAf,CAAuB,UAAC6D,IAAD,EAAU;AAChCD,gBAAWC,KAAKC,IAAhB;AACA,SAAI,mBAAMF,QAAN,CAAJ,EAAqB;AACpB,UAAIG,UAAUH,SAAS3H,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAd;AAAA,UACC+H,SAASH,KAAKzD,KAAL,CAAWoD,IAAX,EADV;AAEA,UAAI,wBAAWO,OAAX,CAAJ,EAAyB;AACxB,sBAAQE,KAAR,CAAcjF,IAAd,EAAoB5D,GAAG4G,GAAvB,EAA4BgC,MAA5B,EAAoCD,OAApC;AACA,OAFD,MAEO;AACN,sBAAQA,OAAR,EAAiB/E,IAAjB,EAAuB5D,GAAG4G,GAA1B,EAA+BgC,MAA/B;AACA;AACD,MARD,MAQO,IAAI,gBAAQb,IAAR,CAAaU,KAAKT,WAAlB,CAAJ,EAAoC;AAC1C,qBAAQC,IAAR,CAAaQ,IAAb,EAAmBzI,GAAG4G,GAAtB,EAA2BsB,OAAOC,EAAP,CAAUC,IAAV,EAA3B;AACA;AACD,KAbD;AAcA;;;;;;;;;;;;;;;;SC2EcU,S,GAAAA,S;;AAnKhB;;AAIA;;AAGA;;AAGA;;AAIA;;;;AAIO,KAAMC,4BAAU;;AAEtB;;;;;;AAMGd,WAAM,cAACrE,IAAD,EAAO8C,EAAP,EAAW/B,IAAX,EAAoB;AACtBoE,iBAAQC,KAAR,CAAcpF,IAAd,EAAoB8C,EAApB,EAAwB/B,IAAxB,EAA8B,MAA9B;AACH,MAVkB;AAWnBsE,SAAI,aAACrF,IAAD,EAAO8C,EAAP,EAAW/B,IAAX;AAAA,gBAAoB,iBAAUf,IAAV,EAAgB8C,EAAhB,EAAoB/B,IAApB,CAApB;AAAA,MAXe;;AAanBuE,UAAK,cAACtF,IAAD,EAAO8C,EAAP,EAAW/B,IAAX;AAAA,gBAAoB,mBAAWf,IAAX,EAAiB8C,EAAjB,EAAqB/B,IAArB,CAApB;AAAA,MAbc;;AAetB;;;;;;AAMGwE,WAAM,cAACvF,IAAD,EAAO8C,EAAP,EAAW/B,IAAX,EAAoB;AACtBoE,iBAAQC,KAAR,CAAcpF,IAAd,EAAoB8C,EAApB,EAAwB/B,IAAxB,EAA8B,MAA9B;AACH,MAvBkB;;AAyBtB;;;;;;AAMGyE,YAAO,gBAACxF,IAAD,EAAO8C,EAAP,EAAW/B,IAAX,EAAoB;AACvBoE,iBAAQC,KAAR,CAAcpF,IAAd,EAAoB8C,EAApB,EAAwB/B,IAAxB,EAA8B,OAA9B;AACH,MAjCkB;;AAmCtB;;;;;;AAMG0E,YAAO,eAACzF,IAAD,EAAO8C,EAAP,EAAW/B,IAAX,EAAoB;AACvBoE,iBAAQC,KAAR,CAAcpF,IAAd,EAAoB8C,EAApB,EAAwB/B,IAAxB,EAA8B,OAA9B;AACA,aAAI3E,cAAJ;AAAA,aACIsJ,QAAQ5C,GAAG1E,KADf;AAAA,aAEIuH,SAASR,QAAQS,OAAR,CAAgB7E,IAAhB,EAAsB2E,KAAtB,CAFb;AAGA1F,cAAK1D,gBAAL,CAAsB,OAAtB,EAA+B,UAAC2I,KAAD,EAAW;AACtCU,sBAASR,QAAQS,OAAR,CAAgB7E,IAAhB,EAAsB2E,KAAtB,CAAT;AACA,iBAAIG,KAAKZ,SAAS5I,OAAO4I,KAAzB;AAAA,iBACI1F,MAAMsG,GAAGxF,MAAH,CAAUe,KADpB;AAEA,iBAAI7B,OAAOoG,MAAX,EAAmB;AACf;AACH;AACDR,qBAAQW,OAAR,CAAgB/E,IAAhB,EAAsB2E,KAAtB,EAA6BnG,GAA7B;AAEH,UATD,EASG,IATH;AAUH,MAxDkB;AAyDtB;;;;;;;AAOG0F,YAAO,eAACjF,IAAD,EAAO8C,EAAP,EAAWkC,MAAX,EAAmBe,GAAnB,EAA2B;AAC9B,aAAIF,KAAKE,IAAI9I,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAT;AAAA,aACI8F,KAAKD,GAAG3E,KAAH,CAAS8G,KAAT,CAAeD,MAAf,CADT;AAEA,aAAI,mBAAMjC,EAAN,CAAJ,EAAe;AACX/C,kBAAK1D,gBAAL,CAAsBuJ,EAAtB,EAA0B9C,GAAGiD,IAAH,CAAQlD,EAAR,CAA1B,EAAuC,KAAvC;AACH;AACJ,MAtEkB;;AAwEtB;;;;;;;AAOGsC,YAAO,eAACpF,IAAD,EAAO8C,EAAP,EAAW/B,IAAX,EAAiBgF,GAAjB,EAAyB;AAC5B,aAAIhD,KAAKkD,MAAMF,MAAM,OAAZ,CAAT;AACA,4BAAMhD,EAAN,KAAaA,GAAG/C,IAAH,EAASmF,QAAQS,OAAR,CAAgB7E,IAAhB,EAAsB+B,GAAG1E,KAAzB,CAAT,CAAb;AACA,4BAAY0E,EAAZ,EAAgB/B,IAAhB,EAAsB,UAACc,MAAD,EAAStC,GAAT,EAAiB;AACnC,gCAAMwD,EAAN,KAAaA,GAAG/C,IAAH,EAAS6B,MAAT,EAAiBtC,GAAjB,CAAb;AACH,UAFD;AAGH,MArFkB;;AAuFtB;;;;;AAKGqG,cAAS,iBAAC7E,IAAD,EAAO1C,IAAP,EAAgB;AACrB0C,cAAK9D,KAAL,CAAW,GAAX,EAAgB+D,OAAhB,CAAwB,UAAUC,GAAV,EAAe;AACnC5C,oBAAOA,KAAK4C,GAAL,CAAP;AACH,UAFD;AAGA,gBAAO5C,IAAP;AACH,MAjGkB;;AAmGtB;;;;;;AAMGyH,cAAS,iBAAC/E,IAAD,EAAO1C,IAAP,EAAakB,GAAb,EAAqB;AAC1B,aAAI2G,QAAQnF,KAAK9D,KAAL,CAAW,GAAX,CAAZ;AAAA,aACIkJ,MAAMD,MAAMzB,MAAN,GAAe,CADzB;AAEAyB,eAAMlF,OAAN,CAAc,UAACC,GAAD,EAAMmF,CAAN,EAAY;AACtB,iBAAIA,KAAKD,GAAT,EAAc;AACV9H,sBAAK4C,GAAL,IAAY1B,GAAZ;AACH,cAFD,MAEO;AACHlB,wBAAOA,KAAK4C,GAAL,CAAP;AACH;AACJ,UAND;AAOH;AAnHkB,EAAhB;;AAsHP;;;;;;AAMA,KAAMgF,QAAQ;AACVI,gBAAW,mBAACrG,IAAD,EAAO6B,MAAP,EAAe8D,MAAf,EAA0B;AACjCA,kBAASA,UAAUnG,SAAV,GAAuBmG,SAAS,EAAhC,kBAAT;AACA3F,cAAKoE,WAAL,GAAmBpE,KAAKoE,WAAL,CAAiBkC,OAAjB,CAAyBX,MAAzB,EAAiC9D,MAAjC,CAAnB;AACH,MAJS;;AAMV0E,gBAAW,mBAACvG,IAAD,EAAO6B,MAAP,EAAkB;AACzB7B,cAAKhC,SAAL,GAAiB6D,MAAjB;AACH,MARS;;AAUV2E,iBAAY,oBAACxG,IAAD,EAAO6B,MAAP,EAAetC,GAAf,EAAuB;AAC/BS,cAAKoB,KAAL,GAAaS,SAASA,MAAT,GAAkB,EAA/B;AACH,MAZS;;AAcV4E,iBAAY,oBAACzG,IAAD,EAAO6B,MAAP,EAAetC,GAAf,EAAuB;AAC/BS,cAAK0G,SAAL,GAAiB,CAACnH,MACdS,KAAK0G,SAAL,CAAeJ,OAAf,CAAuB/G,GAAvB,EAA4BsC,MAA5B,CADc,GAEX7B,KAAK0G,SAAL,GAAiB,GAAjB,GAAuB7E,MAFb,EAEsB2C,IAFtB,EAAjB;AAGH;AAlBS,EAAd;;AAqBO,UAASU,SAAT,CAAmBK,IAAnB,EAAyB;AAC5B,YAAOnI,SAASuJ,WAAT,GAAuBC,wBAAvB,CAAgDrB,IAAhD,CAAP;AACH,E;;;;;;;;;;;;;;;ACrKD;;AAGA;;AAGA;;AAGA;;AAGA;;;;KAIasB,M,WAAAA,M;AACZ,kBAAY7G,IAAZ,EAAkB8C,EAAlB,EAAsB/B,IAAtB,EAA4B;AAAA;;AAC3B,QAAK+F,KAAL,GAAa,IAAb;AACA,QAAKC,GAAL,GAAW,IAAX;AACA,QAAKC,IAAL,CAAUhH,IAAV,EAAgB8C,EAAhB,EAAoB/B,IAApB;AACA;;;;wBAEIf,I,EAAM8C,E,EAAI/B,I,EAAM;AACpB,SAAKiF,IAAL,CAAUhG,IAAV,EAAgB8C,EAAhB,EAAoB/B,IAApB;AACA;;;wBAEIf,I,EAAM8C,E,EAAI/B,I,EAAM;AAAA;;AACpB,QAAIkG,UAAUlG,KAAK9D,KAAL,CAAW,IAAX,EAAiB,CAAjB,EAAoBuH,IAApB,EAAd;AAAA,QACCpI,KAAK,IADN;AAAA,QAECiG,MAAM,YAFP;AAGAjG,OAAG6J,KAAH,CAASjG,IAAT,EAAe8C,EAAf,EAAmB/B,IAAnB;AACA,wBAAY+B,EAAZ,EAAgBmE,OAAhB,EAAyB,UAAC1H,GAAD,EAAMsC,MAAN,EAAaM,OAAb,EAAyB;AACjD,YAAO,MAAK2E,KAAL,CAAWpG,WAAX,IAA0B,MAAKqG,GAAtC,EAA2C;AAC1C,YAAKA,GAAL,CAASxG,UAAT,CAAoB7C,WAApB,CAAgC,MAAKoJ,KAAL,CAAWpG,WAA3C;AACA;AACDtE,QAAG6J,KAAH,CAASjG,IAAT,EAAe8C,EAAf,EAAmB/B,IAAnB;AACA,KALD;AAMA;;;yBAEKf,I,EAAM8C,E,EAAI/B,I,EAAM;AACrB,QAAI,CAAC,KAAK+F,KAAV,EAAiB;AAChB,UAAKA,KAAL,GAAa1J,SAAS8J,aAAT,CAAuB,gBAAvB,CAAb;AACAlH,UAAKO,UAAL,CAAgBE,YAAhB,CAA6B,KAAKqG,KAAlC,EAAyC9G,IAAzC;AACA;AACD,QAAI,CAAC,KAAK+G,GAAV,EAAe;AACd,UAAKA,GAAL,GAAW3J,SAAS8J,aAAT,CAAuB,cAAvB,CAAX;AACAlH,UAAKO,UAAL,CAAgBE,YAAhB,CAA6B,KAAKsG,GAAlC,EAAuC/G,IAAvC;AACA;;AAEDA,SAAKmH,eAAL,CAAqB,OAArB;AACA,QAAI5E,OAAOxB,KAAK9D,KAAL,CAAW,IAAX,EAAiB,CAAjB,EAAoBuH,IAApB,EAAX;AAAA,QACCyC,UAAUlG,KAAK9D,KAAL,CAAW,IAAX,EAAiB,CAAjB,EAAoBuH,IAApB,EADX;AAAA,QAEC4C,MAAM,eAAQxB,OAAR,CAAgBqB,OAAhB,EAAyBnE,GAAG1E,KAA5B,CAFP;AAAA,QAGCmH,OAAOvF,KAAKqH,SAHb;AAAA,QAIChF,MAAM,IAAIiC,MAAJ,CAAW/B,IAAX,EAAgB,IAAhB,CAJP;AAAA,QAKC+E,MAAM,EALP;AAMA,SAAK,IAAIlB,IAAI,CAAR,EAAWD,MAAMiB,IAAI3C,MAA1B,EAAkC2B,IAAID,GAAtC,EAA2CC,GAA3C,EAAgD;AAC/CkB,YAAO/B,KAAKe,OAAL,CAAajE,GAAb,EAAkB4E,UAAU,GAAV,GAAgBb,CAAlC,CAAP;AACA;AACDkB,UAAM,uBAAUA,GAAV,CAAN;AACA,wBAAYA,GAAZ,EAAiBxE,EAAjB,EAAqB,IAArB;AACA,SAAKiE,GAAL,CAASxG,UAAT,CAAoBE,YAApB,CAAiC6G,GAAjC,EAAsC,KAAKP,GAA3C;;AAEA,QAAI/G,KAAKO,UAAT,EAAqB;AACpBP,UAAKO,UAAL,CAAgB7C,WAAhB,CAA4BsC,IAA5B;AACA;AACD;;;;;;;;;;;;;;;;;;;ACnEF;;AAGA;;AAGA;;AAGA;;;;KAIauH,K,WAAAA,K;AACZ,iBAAYvH,IAAZ,EAAkB8C,EAAlB,EAAsB/B,IAAtB,EAA4B;AAAA;;AAC3B,QAAK+F,KAAL,GAAa,IAAb;AACA,QAAKC,GAAL,GAAW,IAAX;AACA,QAAKC,IAAL,CAAUhH,IAAV,EAAgB8C,EAAhB,EAAoB/B,IAApB;AACA;;;;wBAEIf,I,EAAM8C,E,EAAI/B,I,EAAM;AACpB,SAAKiF,IAAL,CAAUhG,IAAV,EAAgB8C,EAAhB,EAAoB/B,IAApB;AACA;;;wBAEIf,I,EAAM8C,E,EAAI/B,I,EAAM;AACpB,QAAI3E,KAAK,IAAT;AACA,wBAAY4D,IAAZ,EAAiB8C,EAAjB;AACA1G,OAAG6J,KAAH,CAASjG,IAAT,EAAe8C,EAAf,EAAmB/B,IAAnB,EAAwB,eAAQ6E,OAAR,CAAgB7E,IAAhB,EAAqB+B,GAAG1E,KAAxB,CAAxB;AACA,wBAAY0E,EAAZ,EAAgB/B,IAAhB,EAAsB,UAACc,MAAD,EAAStC,GAAT,EAAiB;AACtC,SAAG,CAAC,CAACsC,MAAF,IAAY,CAAC,CAACtC,GAAjB,EAAqB;AACpB;AACA;AACDnD,QAAG6J,KAAH,CAASjG,IAAT,EAAe8C,EAAf,EAAmB/B,IAAnB,EAAwBc,MAAxB;AACA,KALD;AAMA;;;yBAEK7B,I,EAAM8C,E,EAAI/B,I,EAAKc,M,EAAOtC,G,EAAK;AAChC,QAAI,CAAC,KAAKuH,KAAV,EAAiB;AAChB,UAAKA,KAAL,GAAa1J,SAAS8J,aAAT,CAAuB,eAAvB,CAAb;AACAlH,UAAKO,UAAL,CAAgBE,YAAhB,CAA6B,KAAKqG,KAAlC,EAAyC9G,IAAzC;AACA;AACD,QAAI,CAAC,KAAK+G,GAAV,EAAe;AACd,UAAKA,GAAL,GAAW3J,SAAS8J,aAAT,CAAuB,aAAvB,CAAX;AACAlH,UAAKO,UAAL,CAAgBE,YAAhB,CAA6B,KAAKsG,GAAlC,EAAuC/G,IAAvC;AACA;AACD,QAAGA,KAAKO,UAAR,EAAoB;AACnBP,UAAKO,UAAL,CAAgB7C,WAAhB,CAA4BsC,IAA5B;AACA;AACD,QAAG6B,MAAH,EAAU;AACT,UAAKkF,GAAL,CAASxG,UAAT,CAAoBE,YAApB,CAAiCT,IAAjC,EAAsC,KAAK+G,GAA3C;AACA;AACD;;;;;;;;;;;;;;;SChDc5K,I,GAAAA,I;;AAFhB,KAAIqL,UAAU,CAAd;;AAEO,UAASrL,IAAT,CAAcsL,EAAd,EAAkB;AACxB,MAAI,CAACA,GAAGvK,GAAR,EAAa,MAAM,IAAI6C,KAAJ,CAAU,YAAV,CAAN;;AAEb0H,KAAG7J,IAAH,GAAU6J,GAAG7J,IAAH,IAAW,KAArB;AACA6J,KAAGlK,KAAH,GAAWkK,GAAGlK,KAAH,IAAY,IAAvB;AACAkK,KAAGpJ,IAAH,GAAUqJ,aAAaD,GAAGpJ,IAAhB,CAAV;AACAoJ,KAAGE,MAAH,GAAYF,GAAGE,MAAH,IAAa,mCAAzB;AACAF,KAAGvK,GAAH,GAASuK,GAAG7J,IAAH,IAAW,MAAX,GACRgK,IAAI1K,GADI,GAENuK,GAAGvK,GAAH,IAAUuK,GAAGvK,GAAH,CAAOiD,OAAP,CAAe,GAAf,KAAuB,CAAC,CAAxB,GAA4B,GAA5B,GAAkC,GAA5C,IAAmDsH,GAAGpJ,IAFzD;;AAIA,MAAIoJ,GAAG7J,IAAH,IAAW,OAAf,EAAwB;AACvBiK,aAAUJ,EAAV;AACA,UAAO,KAAP;AACA;;AAED,MAAIK,KAAK,IAAIC,cAAJ,EAAT;;AAEAD,KAAGE,IAAH,CAAQP,GAAG7J,IAAX,EAAiB6J,GAAGvK,GAApB,EAAyBuK,GAAGlK,KAA5B;AACAkK,KAAG7J,IAAH,CAAQqK,WAAR,IAAuB,MAAvB,IACIH,GAAGI,gBAAH,CAAoB,cAApB,EAAoCT,GAAGE,MAAvC,CADJ;;AAGAG,KAAGxL,gBAAH,CAAoB,kBAApB,EAAwC;AAAA,UACvCwL,GAAGK,UAAH,IAAiB,CAAjB,IAAsBV,GAAG5J,OAAzB,IAAoC4J,GAAG5J,OAAH,CAAWiK,GAAGM,QAAd,CADG;AAAA,GAAxC;AAGAN,KAAGO,IAAH,CAAQZ,GAAG7J,IAAH,KAAY,KAAZ,GAAoB,IAApB,GAA2B6J,GAAGpJ,IAAtC;AACA;;AAED,UAASqJ,YAAT,CAAsBY,GAAtB,EAA2B;AAC1B,SAAO,CAACA,GAAD,GAAO,EAAP,GAAY7I,OAAOsB,IAAP,CAAYuH,GAAZ,EAAiBC,MAAjB,CAClB,UAACT,EAAD,EAAKvF,IAAL;AAAA,UAAcuF,MAAM,MAAMvF,IAAN,GAAa,GAAb,GAAmB+F,IAAI/F,IAAJ,CAAvC;AAAA,GADkB,EACgC,EADhC,EACoCrC,KADpC,CAC0C,CAD1C,CAAnB;AAEA;;AAED,UAAS2H,SAAT,CAAmBW,EAAnB,EAAuB;AACtB,MAAI,CAACA,GAAGC,KAAR,EAAe,MAAM,IAAI1I,KAAJ,CAAU,SAAV,CAAN;AACf,MAAI2I,SAAS,UAAU,GAAV,GAAiBlB,SAA9B;AACAgB,KAAGtL,GAAH,GAASsL,GAAGtL,GAAH,IACJsL,GAAGtL,GAAH,CAAOiD,OAAP,CAAe,GAAf,KAAuB,CAAC,CAAxB,GAA4B,GAA5B,GAAkC,GAD9B,IAENqI,GAAGC,KAFG,GAEK,GAFL,GAEWC,MAFpB;AAGA,MAAIvL,SAASC,SAASC,aAAT,CAAuB,QAAvB,CAAb;AACAsL,SAAOD,MAAP,IAAiB,UAACN,QAAD,EAAc;AAC9B,OAAI;AACHI,OAAG3K,OAAH,CAAWuK,QAAX;AACA,IAFD,SAEU;AACT,WAAOO,OAAOD,MAAP,CAAP;AACAvL,WAAOyL,MAAP;AACA;AACD,GAPD;AAQAzL,SAAOG,GAAP,GAAakL,GAAGtL,GAAhB;AACAE,WAASK,IAAT,CAAcE,WAAd,CAA0BR,MAA1B;AACA,E","file":"single.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d6fb0c502cb7a167cff1","import {\r\n\tVM\r\n} from '../vm/index.js';\r\nimport {\r\n\tajax\r\n} from '../ajax/index.js';\r\nimport {\r\n\tisFun\r\n} from '../common/common.js';\r\n\r\nclass Single {\r\n\tconstructor() {\r\n\t\tthis.Routers = [];\r\n\t\tthis.VM = VM;\r\n\t\tthis.page = null;\r\n\t\tthis.ajax = ajax;\r\n\t\tlet me = this;\r\n\t\twindow.addEventListener('load', function() {\r\n\t\t\tme.urlChange();\r\n\t\t});\r\n\t\twindow.addEventListener('hashchange', function() {\r\n\t\t\tme.urlChange();\r\n\t\t});\r\n\t}\r\n\r\n\turlChange() {\r\n\t\tlet router = this.getRouter();\r\n\t\tif(router){\r\n\t\t\tthis.loadTemplate(router.tempUrl,router.ctrUrl);\r\n\t\t}\r\n\t}\r\n\r\n\tgetRouter() {\r\n\t\tlet curURL = this.getURL(),\r\n\t\t\trouter = this.Routers[curURL];\r\n\t\treturn router ? router : this.Routers[0];\r\n\t}\r\n\r\n\tgetURL() {\r\n\t\treturn location.hash.split(\"?\")[0].split(\"#\")[1];\r\n\t}\r\n\r\n\tloadScript(url) {\r\n\t\tlet script = document.createElement('script'),\r\n\t\t\tme = this;\r\n\t\tscript.src = url;\r\n\t\tscript.async = true;\r\n\t\tscript.onload = function() {\r\n\t\t\tdocument.body.removeChild(script);\r\n\t\t\tif(isFun(me.page)){\r\n\t\t\t\tme.page();\r\n\t\t\t}\r\n\t\t}\r\n\t\tdocument.body.appendChild(script);\r\n\t}\r\n\r\n\tloadTemplate(tempUrl,ctrUrl) {\r\n\t\tlet me = this;\r\n\t\tme.ajax({\r\n\t\t\ttype: 'GET',\r\n\t\t\turl: tempUrl,\r\n\t\t\tasync:false,\r\n\t\t\tsuccess: function(result) {\r\n\t\t\t\tdocument.getElementById('sp-app').innerHTML = result;\r\n\t\t\t\tme.loadScript(ctrUrl);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nwindow.Single = new Single();\n\n\n// WEBPACK FOOTER //\n// ./src/main/index.js","import { err, isFun } from '../common/common.js';\r\nimport { Observe } from '../observe/index.js';\r\nimport { Compile } from '../compile/index.js';\r\n\r\n/**\r\n * 入口对象\r\n */\r\nexport class VM {\r\n\tconstructor(options) {\r\n\t\tthis.$opts = options;\r\n\t\tthis.$data = options.data;\r\n\t\tif (isFun(options)) {\r\n\t\t\toptions.data = options.data();\r\n\t\t} this.$observe = new Observe(options.data);\r\n\r\n\t\tthis.$compile = new Compile(options.el || document.body, this);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/vm/index.js","export let regText = /\\{\\{(.+)\\}\\}/;\r\n\r\nexport function isObject(val) {\r\n\tif(val == undefined){\r\n\t\treturn false;\r\n\t}\r\n\treturn typeof val === 'object';\r\n}\r\n\r\nexport function isPlainObj(val) {\r\n\treturn Object.prototype.toString.call(val) === '[object Object]';\r\n}\r\n\r\nexport function isArray(val) {\r\n\treturn Array.isArray(val);\r\n}\r\n\r\nexport function isFun(val) {\r\n\treturn typeof val === 'function';\r\n}\r\n\r\nexport function err(str) {\r\n\tthrow new Error(str);\r\n}\r\n\r\nexport function isEleNode(node) {\r\n\treturn node.nodeType === 1;\r\n}\r\n\r\nexport function isAttrNode(node) {\r\n\treturn node.nodeType === 2;\r\n}\r\n\r\nexport function isTextNode(node) {\r\n\treturn node.nodeType === 3;\r\n}\r\n\r\nexport function toArray(val) {\r\n\treturn [].slice.call(val);\r\n}\r\n\r\nexport function isDir(str) {\r\n\treturn str.indexOf('s-') === 0;\r\n}\r\n\r\nexport function isEventDir(str) {\r\n\treturn str.indexOf('on') === 0;\r\n}\r\n\r\nexport function isForDir(str) {\r\n\treturn str.indexOf('for') === 0;\r\n}\r\n\r\nexport function insertAfter(newNode, target) {\r\n\tvar parent = target.parentNode;\r\n\tif (parent.lastElementChild == target) {\r\n\t\tparent.appendChild(newNode);\r\n\t} else {\r\n\t\tparent.insertBefore(newNode, target.nextSibling);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/common/common.js","import { isObject, isArray, isFun } from '../common/common.js';\r\nimport { Dep } from '../dep/index.js';\r\nimport { target } from '../watcher/index.js';\r\n\r\n/**\r\n * 发布者对象\r\n */\r\nexport class Observe {\r\n    constructor(data) {\r\n        if (!isObject(data)) {\r\n            return;\r\n        }\r\n        this.walk(data);\r\n    }\r\n\r\n\t/**\r\n\t * [walk 对数据中属性进行遍历劫持]\r\n\t * @param  {[type]} data [待劫持数据]\r\n\t */\r\n    walk(data) {\r\n        let me = this,\r\n            hadProperty = Object.getOwnPropertyDescriptor;\r\n        Object.keys(data).forEach(function (key) {\r\n            if (isFun(hadProperty(data, key).set)) {\r\n                return;\r\n            }\r\n            me.convert(data, key, data[key]);\r\n        });\r\n    }\r\n\r\n\t/**\r\n\t * [convert 递归数据劫持]\r\n\t * @param  {[type]} data  [待劫持数据]\r\n\t * @param  {[type]} key   [待劫持数据属性名]\r\n\t * @param  {[type]} value [待劫持数据值]\r\n\t */\r\n    convert(data, key, value) {\r\n        let ob = this,\r\n            children = new Observe(value),\r\n            dep = new Dep();\r\n        Object.defineProperty(data, key, {\r\n            configurable: false,\r\n            enumerable: true,\r\n            get: function () {\r\n                target && target.addDep(dep);\r\n                return value;\r\n            },\r\n            set: function (newVal) {\r\n                if (value == newVal) {\r\n                    return;\r\n                }\r\n                value = newVal;\r\n                children = new Observe(newVal);\r\n                dep.notify(isArray(newVal));\r\n            }\r\n        });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/observe/index.js","\r\n\r\nlet uid = 0;\r\n\r\n/**\r\n * 发布者与订阅者关联对象\r\n */\r\nexport class Dep {\r\n    constructor() {\r\n        this.id = uid++;\r\n        this.sub = [];\r\n    }\r\n\r\n\t/**\r\n\t * [addSub 在sub中增加订阅者]\r\n\t * @param {[type]} watcher [订阅者 Watcher 对象]\r\n\t */\r\n    addSub(watcher) {\r\n        this.sub.push(watcher);\r\n    }\r\n\r\n    rmSub(sub) {\r\n        let reg = /\\.(\\d)+\\./g;\r\n        return sub.filter((item)=>{\r\n            return !item.$keys.match(reg);\r\n        });\r\n    }\r\n\t/**\r\n\t * [depend 触发 Wtacher 的add事件，将dep加入 Watcher]\r\n\t */\r\n    depend() {\r\n        target.addDep(this);\r\n    }\r\n\r\n\t/**\r\n\t * [notify 绑定数据set出发此方法，对sub中Watcher进行遍历触发update]\r\n\t */\r\n    notify(isArr) {\r\n        if(isArr){\r\n            this.sub = this.rmSub(this.sub);\r\n        }            \r\n        this.sub.forEach((item) => {\r\n            item.update();\r\n        });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/dep/index.js","export let target = null;\r\n\r\n/**\r\n * 订阅者对象\r\n */\r\nexport class Watcher {\r\n\tconstructor(vm, keys, fn) {\r\n\t\tthis.$vm = vm;\r\n\t\tthis.$keys = keys;\r\n\t\tthis._fn = fn;\r\n\t\tthis.depIds = {};\r\n\t\tthis.val = this.get();\r\n\t}\r\n\r\n\t/**\r\n\t * [get 获取数据原始值]\r\n\t */\r\n\tget() {\r\n\t\ttarget = this;\r\n\t\tlet val = this.getVal();\r\n\t\ttarget = null;\r\n\t\treturn val;\r\n\t}\r\n\r\n\t/**\r\n\t * [getVal 遍历keys获取属性值，并出发数据get方法，get方法中触发watcher.addDep]\r\n\t */\r\n\tgetVal() {\r\n\t\tlet keys = this.$keys.split('.'),\r\n\t\t\tval = this.$vm.$data;\r\n\t\tkeys.forEach((key) => {\r\n\t\t\tval = val[key];\r\n\t\t});\r\n\t\treturn val;\r\n\t}\r\n\r\n\t/**\r\n\t * [addDep 将Dep加入Watcher.depIds，触发Dep.addSub]\r\n\t * @param {[type]} dep [Dep对象]\r\n\t */\r\n\taddDep(dep) {\r\n\t\tif (!this.depIds.hasOwnProperty(dep.id)) {\r\n\t\t\tthis.depIds[dep.id] = dep;\r\n\t\t\tdep.addSub(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [update dirUnit._bind中传入的参数]\r\n\t */\r\n\tupdate() {\r\n\t\tlet newVal = this.get(),\r\n\t\t\tval = this.val;\r\n\t\tif (val == newVal) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.val = newVal;\r\n\t\tthis._fn.call(this.$vm, newVal, val, this);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/watcher/index.js","import {\r\n\tisEleNode,\r\n\tisTextNode,\r\n\tisDir,\r\n\tisEventDir,\r\n\tisForDir,\r\n\ttoArray,\r\n\tregText\r\n} from '../common/common.js';\r\nimport {\r\n\tdirUnit\r\n} from '../directive/index.js';\r\n\r\n\r\nexport class Compile {\r\n\tconstructor(el, vm, isDel) {\r\n\t\tthis.$vm = vm;\r\n\t\tthis.$opts = this.$vm.$opts;\r\n\t\tthis.$data = this.$opts.data;\r\n\t\tthis.$isDel = isDel || false;\r\n\t\tthis.$el = el.nodeType ? el : document.querySelector(el);\r\n\r\n\t\tif (this.$el) {\r\n\t\t\tlet frag = this.node2Fragment(this.$el);\r\n\t\t\tthis.analyEleNode(frag);\r\n\t\t\tthis.$el.appendChild(frag);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [node2Fragment 将节点放入文档碎片]\r\n\t * @param  {[type]} node [节点]\r\n\t */\r\n\tnode2Fragment(node) {\r\n\t\tlet frag = document.createDocumentFragment(),\r\n\t\t\tchild;\r\n\t\twhile (child = node.firstChild) {\r\n\t\t\tfrag.appendChild(child);\r\n\t\t}\r\n\t\treturn frag;\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * [analyEleNode 解析模板对模板中的指令进行解析]\r\n\t * @param  {node} el [ 开始节点（递归） ]\r\n\t * @return {[undefined]}\r\n\t */\r\n\tanalyEleNode(el) {\r\n\t\tlet child = el.childNodes,\r\n\t\t\tme = this;\r\n\t\ttoArray(child).forEach((node) => {\r\n\t\t\tif (isEleNode(node)) { //若为元素节点对其属性节点进行遍历\r\n\t\t\t\tme.analyArrtNode(node);\r\n\t\t\t} else if (isTextNode(node) && regText.test(node.textContent)) {\r\n\t\t\t\tdirUnit.text(node, me.$vm, RegExp.$1.trim());\r\n\t\t\t}\r\n\t\t\tif (node.parentNode && node.childNodes && node.childNodes.length > -1) {\r\n\t\t\t\tme.analyEleNode(node);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * [analyArrtNode 对元素节点的属性进行遍历，找出其中指令]\r\n\t * @param  {[node]} node [需要遍历属性的节点]\r\n\t * @return {[undefined]}\r\n\t */\r\n\tanalyArrtNode(node) {\r\n\t\tlet attrs = node.attributes,\r\n\t\t\tme = this,\r\n\t\t\tattrName = '';\r\n\r\n\t\ttoArray(attrs).forEach((attr) => {\r\n\t\t\tattrName = attr.name;\r\n\t\t\tif (isDir(attrName)) {\r\n\t\t\t\tlet dirName = attrName.split('-')[1],\r\n\t\t\t\t\tdirVal = attr.value.trim();\r\n\t\t\t\tif (isEventDir(dirName)) {\r\n\t\t\t\t\tdirUnit.event(node, me.$vm, dirVal, dirName);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdirUnit[dirName](node, me.$vm, dirVal);\r\n\t\t\t\t}\r\n\t\t\t} else if (regText.test(attr.textContent)) {\r\n\t\t\t\tdirUnit.text(attr, me.$vm, RegExp.$1.trim());\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/compile/index.js","import {\r\n    isFun,\r\n    regText\r\n} from '../common/common.js';\r\nimport {\r\n    Watcher\r\n} from '../watcher/index.js';\r\nimport {\r\n    ForDir\r\n} from './forDir.js';\r\nimport {\r\n    IfDir\r\n} from './ifDir.js';\r\n\r\n/**\r\n * [dirUnit 指令-数据绑定单元]\r\n * @包含各指令方法 [test | event]\r\n */\r\nexport const dirUnit = {\r\n\r\n\t/**\r\n\t * [v-text指令 \\ {{.+}}绑定数据修改函数]\r\n\t * @param  {[type]} node [需要更新的节点]\r\n\t * @param  {Single} vm   [创建的全局对象]\r\n\t * @param  {[type]} keys [指令中对应的数据位置]\r\n\t */\r\n    text: (node, vm, keys) => {\r\n        dirUnit._bind(node, vm, keys, 'text');\r\n    },\r\n    if: (node, vm, keys) => new IfDir(node, vm, keys),\r\n\r\n    for: (node, vm, keys) => new ForDir(node, vm, keys),\r\n\r\n\t/**\r\n\t * [v-html指令]\r\n\t * @param  {[type]} node [需要更新的节点]\r\n\t * @param  {Single} vm   [创建的全局对象]\r\n\t * @param  {[type]} keys [指令中对应的数据位置]\r\n\t */\r\n    html: (node, vm, keys) => {\r\n        dirUnit._bind(node, vm, keys, 'html');\r\n    },\r\n\r\n\t/**\r\n\t * [v-class指令]\r\n\t * @param  {[type]} node [需要更新的节点]\r\n\t * @param  {Single} vm   [创建的全局对象]\r\n\t * @param  {[type]} keys [指令中对应的数据位置]\r\n\t */\r\n    class: (node, vm, keys) => {\r\n        dirUnit._bind(node, vm, keys, 'class');\r\n    },\r\n\r\n\t/**\r\n\t * [v-model指令]\r\n\t * @param  {[type]} node [需要更新的节点]\r\n\t * @param  {Single} vm   [创建的全局对象]\r\n\t * @param  {[type]} keys [指令中对应的数据位置]\r\n\t */\r\n    model: (node, vm, keys) => {\r\n        dirUnit._bind(node, vm, keys, 'model');\r\n        let me = this,\r\n            _data = vm.$data,\r\n            oldVal = dirUnit._getVal(keys, _data);\r\n        node.addEventListener('input', (event) => {\r\n            oldVal = dirUnit._getVal(keys, _data);\r\n            let ev = event || window.event,\r\n                val = ev.target.value;\r\n            if (val == oldVal) {\r\n                return;\r\n            }\r\n            dirUnit._setVal(keys, _data, val);\r\n\r\n        }, true);\r\n    },\r\n\t/**\r\n\t * [v-on:ev 事件指令]\r\n\t * @param  {[type]} node   [需要更新的节点]\r\n\t * @param  {[type]} vm     [创建的全局对象]\r\n\t * @param  {[type]} dirVal [指令中的值]\r\n\t * @param  {[type]} dir    [指令名]\r\n\t */\r\n    event: (node, vm, dirVal, dir) => {\r\n        let ev = dir.split(':')[1],\r\n            fn = vm.$opts.event[dirVal];\r\n        if (isFun(fn)) {\r\n            node.addEventListener(ev, fn.bind(vm), false);\r\n        }\r\n    },\r\n\r\n\t/**\r\n\t * [将节点值与数据进行绑定，当数据修改时，遍历该数据所有订阅者dep.sub，调用 Watcher 中的匿名函数]\r\n\t * @param  {[type]} node [需要更新的节点]\r\n\t * @param  {[type]} vm   [创建的全局对象]\r\n\t * @param  {[type]} keys [指令中对应的数据位置]\r\n\t * @param  {[type]} dir  [指令名]\r\n\t */\r\n    _bind: (node, vm, keys, dir) => {\r\n        let fn = upper[dir + 'Upper'];\r\n        isFun(fn) && fn(node, dirUnit._getVal(keys, vm.$data));\r\n        new Watcher(vm, keys, (newVal, val) => {\r\n            isFun(fn) && fn(node, newVal, val);\r\n        });\r\n    },\r\n\r\n\t/**\r\n\t * [根据指令值获取绑定的数据值]\r\n\t * @param  {[str]} keys [指令中对应的数据位置]\r\n\t * @param  {[obj]} val  [数据所在位置 / 数据]\r\n\t */\r\n    _getVal: (keys, data) => {\r\n        keys.split('.').forEach(function (key) {\r\n            data = data[key];\r\n        });\r\n        return data;\r\n    },\r\n\r\n\t/**\r\n\t * [设置data中的某项的值，触发set]\r\n\t * @param  {[str]} keys [指令中对应的数据位置]\r\n\t * @param  {[obj]} data [new Single() 参数对象 data]\r\n\t * @param  {[any]} val  [新值]\r\n\t */\r\n    _setVal: (keys, data, val) => {\r\n        let _keys = keys.split('.'),\r\n            len = _keys.length - 1;\r\n        _keys.forEach((key, i) => {\r\n            if (i == len) {\r\n                data[key] = val;\r\n            } else {\r\n                data = data[key];\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * [upper 指令更新单元]\r\n * @param  {[str]} node \t[绑定节点]\r\n * @param  {[obj]} newVla [新值]\r\n * @param  {[any]} val  \t[原值]\r\n */\r\nconst upper = {\r\n    textUpper: (node, newVal, oldVal) => {\r\n        oldVal = oldVal != undefined ? (oldVal + '') : regText;\r\n        node.textContent = node.textContent.replace(oldVal, newVal);\r\n    },\r\n\r\n    htmlUpper: (node, newVal) => {\r\n        node.innerHTML = newVal;\r\n    },\r\n\r\n    modelUpper: (node, newVal, val) => {\r\n        node.value = newVal ? newVal : '';\r\n    },\r\n\r\n    classUpper: (node, newVal, val) => {\r\n        node.className = (val ?\r\n            node.className.replace(val, newVal) \r\n            : (node.className + ' ' + newVal)).trim();\r\n    }\r\n}\r\n\r\nexport function changHtml(html) {\r\n    return document.createRange().createContextualFragment(html);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/directive/index.js","import {\r\n\ttoArray\r\n} from '../common/common.js';\r\nimport {\r\n\tdirUnit\r\n} from './index.js';\r\nimport {\r\n\tCompile\r\n} from '../compile/index.js';\r\nimport {\r\n\tchangHtml\r\n} from '../directive/index.js';\r\nimport {\r\n\tWatcher\r\n} from '../watcher/index.js';\r\n\r\nexport class ForDir {\r\n\tconstructor(node, vm, keys) {\r\n\t\tthis.start = null;\r\n\t\tthis.end = null;\r\n\t\tthis.init(node, vm, keys);\r\n\t}\r\n\r\n\tinit(node, vm, keys) {\r\n\t\tthis.bind(node, vm, keys);\r\n\t}\r\n\r\n\tbind(node, vm, keys) {\r\n\t\tlet arrName = keys.split('in')[1].trim(),\r\n\t\t\tme = this,\r\n\t\t\treg = /\\.(\\d)+\\./g\r\n\t\tme.upper(node, vm, keys);\r\n\t\tnew Watcher(vm, arrName, (val, newVal,watcher) => {\r\n\t\t\twhile (this.start.nextSibling != this.end) {\r\n\t\t\t\tthis.end.parentNode.removeChild(this.start.nextSibling);\r\n\t\t\t}\r\n\t\t\tme.upper(node, vm, keys);\r\n\t\t});\r\n\t}\r\n\r\n\tupper(node, vm, keys) {\r\n\t\tif (!this.start) {\r\n\t\t\tthis.start = document.createComment('start of s-for');\r\n\t\t\tnode.parentNode.insertBefore(this.start, node);\r\n\t\t}\r\n\t\tif (!this.end) {\r\n\t\t\tthis.end = document.createComment('end of s-for');\r\n\t\t\tnode.parentNode.insertBefore(this.end, node);\r\n\t\t}\r\n\r\n\t\tnode.removeAttribute('s-for');\r\n\t\tlet item = keys.split('in')[0].trim(),\r\n\t\t\tarrName = keys.split('in')[1].trim(),\r\n\t\t\tarr = dirUnit._getVal(arrName, vm.$data),\r\n\t\t\thtml = node.outerHTML,\r\n\t\t\treg = new RegExp(item,'gm'),\r\n\t\t\tbox = '';\r\n\t\tfor (let i = 0, len = arr.length; i < len; i++) {\r\n\t\t\tbox += html.replace(reg, arrName + '.' + i);\r\n\t\t};\r\n\t\tbox = changHtml(box);\r\n\t\tnew Compile(box, vm, true);\r\n\t\tthis.end.parentNode.insertBefore(box, this.end);\r\n\r\n\t\tif (node.parentNode) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t}\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/directive/forDir.js","import {\r\n\tdirUnit\r\n} from './index.js';\r\nimport {\r\n\tCompile\r\n} from '../compile/index.js';\r\nimport {\r\n\tchangHtml\r\n} from '../directive/index.js';\r\nimport {\r\n\tWatcher\r\n} from '../watcher/index.js';\r\n\r\nexport class IfDir {\r\n\tconstructor(node, vm, keys) {\r\n\t\tthis.start = null;\r\n\t\tthis.end = null;\r\n\t\tthis.init(node, vm, keys);\r\n\t}\r\n\r\n\tinit(node, vm, keys) {\r\n\t\tthis.bind(node, vm, keys);\r\n\t}\r\n\r\n\tbind(node, vm, keys) {\r\n\t\tlet me = this;\r\n\t\tnew Compile(node,vm);\r\n\t\tme.upper(node, vm, keys,dirUnit._getVal(keys,vm.$data));\r\n\t\tnew Watcher(vm, keys, (newVal, val) => {\r\n\t\t\tif(!!newVal == !!val){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tme.upper(node, vm, keys,newVal);\r\n\t\t});\r\n\t}\r\n\r\n\tupper(node, vm, keys,newVal,val) {\r\n\t\tif (!this.start) {\r\n\t\t\tthis.start = document.createComment('start of s-if');\r\n\t\t\tnode.parentNode.insertBefore(this.start, node);\r\n\t\t}\r\n\t\tif (!this.end) {\r\n\t\t\tthis.end = document.createComment('end of s-if');\r\n\t\t\tnode.parentNode.insertBefore(this.end, node);\r\n\t\t}\r\n\t\tif(node.parentNode) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t}\r\n\t\tif(newVal){\r\n\t\t\tthis.end.parentNode.insertBefore(node,this.end);\r\n\t\t}\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/directive/ifDir.js","\r\nlet jsonpId = 0\r\n\r\nexport function ajax(aD) {\r\n\tif (!aD.url) throw new Error('请输入正确的URL!');\r\n\r\n\taD.type = aD.type || 'GET';\r\n\taD.async = aD.async || true;\r\n\taD.data = encodeFormat(aD.data);\r\n\taD.header = aD.header || \"application/x-www-form-urlencoded\";\r\n\taD.url = aD.type == 'POST' ?\r\n\t\tsaD.url\r\n\t\t: aD.url + (aD.url.indexOf('?') == -1 ? '?' : '&') + aD.data;\r\n\r\n\tif (aD.type == 'jsonp') {\r\n\t\tajaxJsonp(aD);\r\n\t\treturn false;\r\n\t}\r\n\r\n\tlet re = new XMLHttpRequest;\r\n\t\r\n\tre.open(aD.type, aD.url, aD.async);\r\n\taD.type.toUpperCase == 'POST'\r\n\t\t&& re.setRequestHeader(\"content-type\", aD.header);\r\n\r\n\tre.addEventListener('readystatechange', () =>\r\n\t\tre.readyState == 4 && aD.success && aD.success(re.response)\r\n\t);\r\n\tre.send(aD.type === 'GET' ? null : aD.data);\r\n}\r\n\r\nfunction encodeFormat(obj) {\r\n\treturn !obj ? '' : Object.keys(obj).reduce(\r\n\t\t(re, item) => re += '&' + item + '=' + obj[item], '').slice(1);\r\n}\r\n\r\nfunction ajaxJsonp(ao) {\r\n\tif (!ao.jsonp) throw new Error('请输入函数名称');\r\n\tlet fnName = 'jsonp' + '_' + (jsonpId++);\r\n\tao.url = ao.url\r\n\t\t+ ((ao.url.indexOf('?') == -1 ? '?' : '&'))\r\n\t\t+ ao.jsonp + '=' + fnName;\r\n\tlet script = document.createElement('script');\r\n\tglobal[fnName] = (response) => {\r\n\t\ttry {\r\n\t\t\tao.success(response);\r\n\t\t} finally {\r\n\t\t\tdelete global[fnName];\r\n\t\t\tscript.remove();\r\n\t\t}\r\n\t}\r\n\tscript.src = ao.url;\r\n\tdocument.body.appendChild(script);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ajax/index.js"],"sourceRoot":""}