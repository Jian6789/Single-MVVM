{"version":3,"sources":["webpack:///webpack/bootstrap 59c827d491727e7ab776","webpack:///./src/main/index.js","webpack:///./src/vm/index.js","webpack:///./src/common/common.js","webpack:///./src/arrInit/index.js","webpack:///./src/observe/index.js","webpack:///./src/dep/index.js","webpack:///./src/watcher/index.js","webpack:///./src/compile/index.js","webpack:///./src/directive/index.js","webpack:///./src/directive/forDir.js","webpack:///./src/directive/ifDir.js","webpack:///./src/ajax/index.js"],"names":["Single","Routers","VM","page","ajax","me","window","addEventListener","urlChange","router","getRouter","loadTemplate","tempUrl","ctrUrl","curURL","getURL","find","item","url","location","hash","split","script","document","createElement","src","async","onload","body","removeChild","appendChild","type","success","result","getElementById","innerHTML","loadScript","options","$opts","$data","data","$compile","el","isObject","isPlainObj","isArray","isFun","err","isEleNode","isAttrNode","isTextNode","toArray","isDir","isEventDir","isForDir","insertAfter","regText","val","Object","prototype","toString","call","Array","str","Error","node","nodeType","slice","indexOf","newNode","target","parent","parentNode","lastElementChild","insertBefore","nextSibling","arrayInit","_copy","_del","index","filter","i","_pop","_shift","length","_insert","splice","_push","_unpop","Observe","walk","hadProperty","getOwnPropertyDescriptor","keys","forEach","key","set","convert","value","ob","children","dep","defineProperty","configurable","enumerable","get","addDep","newVal","notify","uid","Dep","id","sub","watcher","push","update","Watcher","vm","fn","$vm","$keys","_fn","depIds","getVal","hasOwnProperty","addSub","Compile","$el","querySelector","frag","node2Fragment","analyEleNode","createDocumentFragment","child","firstChild","childNodes","analyArrtNode","test","textContent","text","RegExp","$1","trim","attrs","attributes","attrName","attr","name","dirName","dirVal","event","changHtml","dirUnit","_bind","if","for","html","class","model","_data","oldVal","_getVal","ev","_setVal","dir","bind","upper","_keys","len","textUpper","replace","htmlUpper","modelUpper","classUpper","className","createRange","createContextualFragment","ForDir","start","end","init","arrName","createComment","removeAttribute","arr","outerHTML","box","IfDir","jsonpId","aD","encodeFormat","ajaxJsonp","re","XMLHttpRequest","open","onreadystatechange","readyState","response","send","obj","reduce","ao","jsonp","fnName","global"],"mappings":"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","file":"single.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 59c827d491727e7ab776","import {\r\n\tVM\r\n} from '../vm/index.js';\r\nimport {\r\n\tajax\r\n} from '../ajax/index.js';\r\nimport {\r\n\tisFun\r\n} from '../common/common.js';\r\n\r\nclass Single {\r\n\tconstructor() {\r\n\t\tthis.Routers = [];\r\n\t\tthis.VM = VM;\r\n\t\tthis.page = null;\r\n\t\tthis.ajax = ajax;\r\n\t\tlet me = this;\r\n\t\twindow.addEventListener('load', function() {\r\n\t\t\tme.urlChange();\r\n\t\t});\r\n\t\twindow.addEventListener('hashchange', function() {\r\n\t\t\tme.urlChange();\r\n\t\t});\r\n\t}\r\n\r\n\turlChange() {\r\n\t\tlet router = this.getRouter();\r\n\t\tif(router){\r\n\t\t\tthis.loadTemplate(router.tempUrl,router.ctrUrl);\r\n\t\t}\r\n\t}\r\n\r\n\tgetRouter() {\r\n\t\tlet curURL = this.getURL(),\r\n\t\t\trouter = this.Routers.find(function(item) {\r\n\t\t\t\treturn item.url === curURL;\r\n\t\t\t});\r\n\t\treturn router ? router : this.Routers[0];\r\n\t}\r\n\r\n\tgetURL() {\r\n\t\treturn location.hash.split(\"?\")[0].split(\"#\")[1];\r\n\t}\r\n\r\n\tloadScript(url) {\r\n\t\tlet script = document.createElement('script'),\r\n\t\t\tme = this;\r\n\t\tscript.src = url;\r\n\t\tscript.async = true;\r\n\t\tscript.onload = function() {\r\n\t\t\tdocument.body.removeChild(script);\r\n\t\t\tif(isFun(me.page)){\r\n\t\t\t\tme.page();\r\n\t\t\t}\r\n\t\t}\r\n\t\tdocument.body.appendChild(script);\r\n\t}\r\n\r\n\tloadTemplate(tempUrl,ctrUrl) {\r\n\t\tlet me = this;\r\n\t\tme.ajax({\r\n\t\t\ttype: 'GET',\r\n\t\t\turl: tempUrl,\r\n\t\t\tasync:false,\r\n\t\t\tsuccess: function(result) {\r\n\t\t\t\tdocument.getElementById('sp-app').innerHTML = result;\r\n\t\t\t\tme.loadScript(ctrUrl);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nwindow.Single = new Single();\n\n\n// WEBPACK FOOTER //\n// ./src/main/index.js","import { err,isFun } from '../common/common.js';\r\nimport { arrayInit } from '../arrInit/index.js';\r\nimport { Observe } from '../observe/index.js';\r\nimport { Compile } from '../compile/index.js';\r\n\r\n/**\r\n * 入口对象\r\n */\r\nexport class VM {\r\n\tconstructor(options){\r\n\t\tarrayInit();\r\n\t\tthis.$opts = options;\r\n\t\tthis.$data = options.data;\r\n\t\tif(isFun(options)){\r\n\t\t\toptions.data = options.data();\r\n\t\t}\r\n\t\tnew Observe(options.data);\r\n\r\n\t\tthis.$compile = new Compile(options.el || document.body,this);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/vm/index.js","export let regText = /\\{\\{(.+)\\}\\}/;\r\n\r\nexport function isObject(val) {\r\n\treturn typeof val === 'object';\r\n}\r\n\r\nexport function isPlainObj(val) {\r\n\treturn Object.prototype.toString.call(val) === '[object Object]';\r\n}\r\n\r\nexport function isArray(val) {\r\n\treturn Array.isArray(val);\r\n}\r\n\r\nexport function isFun(val) {\r\n\treturn typeof val === 'function';\r\n}\r\n\r\nexport function err(str) {\r\n\tthrow new Error(str);\r\n}\r\n\r\nexport function isEleNode(node) {\r\n\treturn node.nodeType === 1;\r\n}\r\n\r\nexport function isAttrNode(node) {\r\n\treturn node.nodeType === 2;\r\n}\r\n\r\nexport function isTextNode(node) {\r\n\treturn node.nodeType === 3;\r\n}\r\n\r\nexport function toArray(val) {\r\n\treturn [].slice.call(val);\r\n}\r\n\r\nexport function isDir(str) {\r\n\treturn str.indexOf('s-') === 0;\r\n}\r\n\r\nexport function isEventDir(str) {\r\n\treturn str.indexOf('on') === 0;\r\n}\r\n\r\nexport function isForDir(str) {\r\n\treturn str.indexOf('for') === 0;\r\n}\r\n\r\nexport function insertAfter(newNode, target) {\r\n\tvar parent = target.parentNode;\r\n\tif (parent.lastElementChild == target) {\r\n\t\tparent.appendChild(newNode);\r\n\t} else {\r\n\t\tparent.insertBefore(newNode, target.nextSibling);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/common/common.js","import { isArray } from '../common/common.js'\r\n\r\n/**\r\n * [arrayInit 数组扩展函数]\r\n * @return {[type]} [description]\r\n */\r\nexport let arrayInit = function(){\r\n\r\n\t/**\r\n\t * [_copy 浅拷贝数组]\r\n\t */\r\n\tArray.prototype._copy = function(){\r\n\t\treturn [].slice.call(this);\r\n\t}\r\n\r\n\t/**\r\n\t * [_del 删除数组制定下标的元素]\r\n\t * @param  {[type]} index [数组下标]\r\n\t */\r\n\tArray.prototype._del = function(index){\r\n\t\treturn this.filter((item,i)=> i !== index);\r\n\t}\r\n\r\n\t/**\r\n\t * [_pop 删除数组中第一个元素]\r\n\t * @return {[type]} [description]\r\n\t */\r\n\tArray.prototype._pop = function(){\r\n\t\treturn this._del(0);\r\n\t}\r\n\r\n\t/**\r\n\t * [_shift 删除数组最后一个元素]\r\n\t * @return {[type]} [description]\r\n\t */\r\n\tArray.prototype._shift = function(){\r\n\t\treturn this._del(this.length-1);\r\n\t}\r\n\r\n\t/**\r\n\t * [_insert 在数组指定位置插入元素]\r\n\t * @param  {[type]} index [下标]\r\n\t * @param  {[type]} item  [元素]\r\n\t */\r\n\tArray.prototype._insert = function(index,item){\r\n\t\tlet result = this._copy();\r\n\t\tresult.splice(index,0,item);\r\n\t\treturn result;\r\n\t}\r\n\r\n\t/**\r\n\t * [_push 在数组末尾增加元素]\r\n\t * @param  {[type]} item [元素]\r\n\t */\r\n\tArray.prototype._push = function(item){\r\n\t\treturn this._insert(this.length,item);\r\n\t}\r\n\r\n\t/**\r\n\t * [_unpop 在数组开始增加元素]\r\n\t * @param  {[type]} item [元素]\r\n\t */\r\n\tArray.prototype._unpop = function(item){\r\n\t\treturn this._insert(0,item);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/arrInit/index.js","import { isObject,isArray,isFun } from '../common/common.js';\r\nimport { Dep } from '../dep/index.js';\r\nimport { target } from '../watcher/index.js';\r\n\r\n/**\r\n * 发布者对象\r\n */\r\nexport class Observe{\r\n\tconstructor(data){\r\n\t\tif(!isObject(data)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.walk(data);\r\n\t}\r\n\r\n\t/**\r\n\t * [walk 对数据中属性进行遍历劫持]\r\n\t * @param  {[type]} data [待劫持数据]\r\n\t */\r\n\twalk(data){\r\n\t\tlet me = this,\r\n\t\t\t\thadProperty = Object.getOwnPropertyDescriptor;\r\n\t\tObject.keys(data).forEach(function(key){\r\n\t\t\tif(isFun(hadProperty(data,key).set)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tme.convert(data,key,data[key]);\r\n\t\t});\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * [convert 递归数据劫持]\r\n\t * @param  {[type]} data  [待劫持数据]\r\n\t * @param  {[type]} key   [待劫持数据属性名]\r\n\t * @param  {[type]} value [待劫持数据值]\r\n\t */\r\n\tconvert(data,key,value){\r\n\t\tlet ob = this,\r\n\t\t\t\tchildren = new Observe(value),\r\n\t\t\t\tdep = new Dep();\r\n\t\tObject.defineProperty(data,key,{\r\n\t\t\tconfigurable:false,\r\n\t\t\tenumerable:true,\r\n\t\t\tget:function (){\r\n\t\t\t\ttarget && target.addDep(dep);\r\n\t\t\t\treturn value;\r\n\t\t\t},\r\n\t\t\tset:function (newVal) {\r\n\t\t\t\tif(value == newVal){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvalue = newVal;\r\n\t\t\t\tchildren = new Observe(newVal);\r\n\t\t\t\tdep.notify();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/observe/index.js","\r\n\r\nlet uid = 0;\r\n\r\n/**\r\n * 发布者与订阅者关联对象\r\n */\r\nexport class Dep {\r\n\tconstructor() {\r\n\t\tthis.id = uid++;\r\n\t\tthis.sub = [];\r\n\t}\r\n\r\n\t/**\r\n\t * [addSub 在sub中增加订阅者]\r\n\t * @param {[type]} watcher [订阅者 Watcher 对象]\r\n\t */\r\n\taddSub(watcher) {\r\n\t\tthis.sub.push(watcher);\r\n\t}\r\n\r\n\t/**\r\n\t * [depend 触发 Wtacher 的add事件，将dep加入 Watcher]\r\n\t */\r\n\tdepend() {\r\n\t\ttarget.addDep(this);\r\n\t}\r\n\r\n\t/**\r\n\t * [notify 绑定数据set出发此方法，对sub中Watcher进行遍历触发update]\r\n\t */\r\n\tnotify() {\r\n\t\tthis.sub.forEach((item) => {\r\n\t\t\titem.update();\r\n\t\t});\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/dep/index.js","export let target = null;\r\n\r\n/**\r\n * 订阅者对象\r\n */\r\nexport class Watcher {\r\n\tconstructor(vm, keys, fn) {\r\n\t\tthis.$vm = vm;\r\n\t\tthis.$keys = keys;\r\n\t\tthis._fn = fn;\r\n\t\tthis.depIds = {};\r\n\t\tthis.val = this.get();\r\n\t}\r\n\r\n\t/**\r\n\t * [get 获取数据原始值]\r\n\t */\r\n\tget() {\r\n\t\ttarget = this;\r\n\t\tlet val = this.getVal();\r\n\t\ttarget = null;\r\n\t\treturn val;\r\n\t}\r\n\r\n\t/**\r\n\t * [getVal 遍历keys获取属性值，并出发数据get方法，get方法中触发watcher.addDep]\r\n\t */\r\n\tgetVal() {\r\n\t\tlet keys = this.$keys.split('.'),\r\n\t\t\tval = this.$vm.$data;\r\n\t\tkeys.forEach((key) => {\r\n\t\t\tval = val[key];\r\n\t\t});\r\n\t\treturn val;\r\n\t}\r\n\r\n\t/**\r\n\t * [addDep 将Dep加入Watcher.depIds，触发Dep.addSub]\r\n\t * @param {[type]} dep [Dep对象]\r\n\t */\r\n\taddDep(dep) {\r\n\t\tif (!this.depIds.hasOwnProperty(dep.id)) {\r\n\t\t\tthis.depIds[dep.id] = dep;\r\n\t\t\tdep.addSub(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [update dirUnit._bind中传入的参数]\r\n\t */\r\n\tupdate() {\r\n\t\tlet newVal = this.get(),\r\n\t\t\tval = this.val;\r\n\t\tif (val == newVal) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.val = newVal;\r\n\t\tthis._fn.call(this.$vm, newVal, val);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/watcher/index.js","import {\r\n\tisEleNode,\r\n\tisTextNode,\r\n\tisDir,\r\n\tisEventDir,\r\n\tisForDir,\r\n\ttoArray,\r\n\tregText\r\n} from '../common/common.js';\r\nimport {\r\n\tdirUnit\r\n} from '../directive/index.js';\r\n\r\n\r\nexport class Compile {\r\n\tconstructor(el, vm) {\r\n\t\tthis.$vm = vm;\r\n\t\tthis.$opts = this.$vm.$opts;\r\n\t\tthis.$data = this.$opts.data;\r\n\t\tthis.$el = el.nodeType ? el : document.querySelector(el);\r\n\r\n\t\tif (this.$el) {\r\n\t\t\tlet frag = this.node2Fragment(this.$el);\r\n\t\t\tthis.analyEleNode(frag);\r\n\t\t\tthis.$el.appendChild(frag);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [node2Fragment 将节点放入文档碎片]\r\n\t * @param  {[type]} node [节点]\r\n\t */\r\n\tnode2Fragment(node) {\r\n\t\tlet frag = document.createDocumentFragment(),\r\n\t\t\tchild;\r\n\t\twhile (child = node.firstChild) {\r\n\t\t\tfrag.appendChild(child);\r\n\t\t}\r\n\t\treturn frag;\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * [analyEleNode 解析模板对模板中的指令进行解析]\r\n\t * @param  {node} el [ 开始节点（递归） ]\r\n\t * @return {[undefined]}\r\n\t */\r\n\tanalyEleNode(el) {\r\n\t\tlet child = el.childNodes,\r\n\t\t\tme = this;\r\n\t\ttoArray(child).forEach((node) => {\r\n\t\t\tif (isEleNode(node)) { //若为元素节点对其属性节点进行遍历\r\n\t\t\t\tme.analyArrtNode(node);\r\n\t\t\t} else if (isTextNode(node) && regText.test(node.textContent)) {\r\n\t\t\t\tdirUnit.text(node, me.$vm, RegExp.$1.trim());\r\n\t\t\t}\r\n\t\t\tif (node.parentNode && node.childNodes && node.childNodes.length > -1) {\r\n\t\t\t\tme.analyEleNode(node);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * [analyArrtNode 对元素节点的属性进行遍历，找出其中指令]\r\n\t * @param  {[node]} node [需要遍历属性的节点]\r\n\t * @return {[undefined]}\r\n\t */\r\n\tanalyArrtNode(node) {\r\n\t\tlet attrs = node.attributes,\r\n\t\t\tme = this,\r\n\t\t\tattrName = '';\r\n\r\n\t\ttoArray(attrs).forEach((attr) => {\r\n\t\t\tattrName = attr.name;\r\n\t\t\tif (isDir(attrName)) {\r\n\t\t\t\tlet dirName = attrName.split('-')[1],\r\n\t\t\t\t\tdirVal = attr.value.trim();\r\n\t\t\t\tif (isEventDir(dirName)) {\r\n\t\t\t\t\tdirUnit.event(node, me.$vm, dirVal, dirName);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdirUnit[dirName](node, me.$vm, dirVal);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/compile/index.js","import {\r\n\tisFun,\r\n\tregText\r\n} from '../common/common.js';\r\nimport {\r\n\tWatcher\r\n} from '../watcher/index.js';\r\nimport {\r\n\tForDir\r\n} from './forDir.js';\r\nimport {\r\n\tIfDir\r\n} from './ifDir.js';\r\n\r\n/**\r\n * [dirUnit 指令-数据绑定单元]\r\n * @包含各指令方法 [test | event]\r\n */\r\nexport const dirUnit = {\r\n\r\n\t/**\r\n\t * [v-text指令 \\ {{.+}}绑定数据修改函数]\r\n\t * @param  {[type]} node [需要更新的节点]\r\n\t * @param  {Single} vm   [创建的全局对象]\r\n\t * @param  {[type]} keys [指令中对应的数据位置]\r\n\t */\r\n\ttext: (node, vm, keys) => {\r\n\t\tdirUnit._bind(node, vm, keys, 'text');\r\n\t},\r\n\tif:(node, vm, keys)=> new IfDir(node, vm, keys),\r\n\tfor: (node, vm, keys) => new ForDir(node, vm, keys),\r\n\r\n\t/**\r\n\t * [v-html指令]\r\n\t * @param  {[type]} node [需要更新的节点]\r\n\t * @param  {Single} vm   [创建的全局对象]\r\n\t * @param  {[type]} keys [指令中对应的数据位置]\r\n\t */\r\n\thtml: (node, vm, keys) => {\r\n\t\tdirUnit._bind(node, vm, keys, 'html');\r\n\t},\r\n\r\n\t/**\r\n\t * [v-class指令]\r\n\t * @param  {[type]} node [需要更新的节点]\r\n\t * @param  {Single} vm   [创建的全局对象]\r\n\t * @param  {[type]} keys [指令中对应的数据位置]\r\n\t */\r\n\tclass: (node, vm, keys) => {\r\n\t\tdirUnit._bind(node, vm, keys, 'class');\r\n\t},\r\n\r\n\t/**\r\n\t * [v-model指令]\r\n\t * @param  {[type]} node [需要更新的节点]\r\n\t * @param  {Single} vm   [创建的全局对象]\r\n\t * @param  {[type]} keys [指令中对应的数据位置]\r\n\t */\r\n\tmodel: (node, vm, keys) => {\r\n\t\tdirUnit._bind(node, vm, keys, 'model');\r\n\t\tlet me = this,\r\n\t\t\t_data = vm.$data,\r\n\t\t\toldVal = dirUnit._getVal(keys, _data);\r\n\t\tnode.addEventListener('input', (event) => {\r\n\t\t\toldVal = dirUnit._getVal(keys, _data);\r\n\t\t\tlet ev = event || window.event,\r\n\t\t\t\tval = ev.target.value;\r\n\t\t\tif (val == oldVal) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdirUnit._setVal(keys, _data, val);\r\n\r\n\t\t}, true);\r\n\t},\r\n\r\n\t/**\r\n\t * [v-on:ev 事件指令]\r\n\t * @param  {[type]} node   [需要更新的节点]\r\n\t * @param  {[type]} vm     [创建的全局对象]\r\n\t * @param  {[type]} dirVal [指令中的值]\r\n\t * @param  {[type]} dir    [指令名]\r\n\t */\r\n\tevent: (node, vm, dirVal, dir) => {\r\n\t\tlet ev = dir.split(':')[1],\r\n\t\t\tfn = vm.$opts.event[dirVal];\r\n\t\tif (isFun(fn)) {\r\n\t\t\tnode.addEventListener(ev, fn.bind(vm), false);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * [将节点值与数据进行绑定，当数据修改时，遍历该数据所有订阅者dep.sub，调用 Watcher 中的匿名函数]\r\n\t * @param  {[type]} node [需要更新的节点]\r\n\t * @param  {[type]} vm   [创建的全局对象]\r\n\t * @param  {[type]} keys [指令中对应的数据位置]\r\n\t * @param  {[type]} dir  [指令名]\r\n\t */\r\n\t_bind: (node, vm, keys, dir) => {\r\n\t\tlet fn = upper[dir + 'Upper'];\r\n\t\tisFun(fn) && fn(node, dirUnit._getVal(keys, vm.$data));\r\n\t\tif (dir === 'model') {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tnew Watcher(vm, keys, (newVal, val) => {\r\n\t\t\tisFun(fn) && fn(node, newVal, val);\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * [根据指令值获取绑定的数据值]\r\n\t * @param  {[str]} keys [指令中对应的数据位置]\r\n\t * @param  {[obj]} val  [数据所在位置 / 数据]\r\n\t */\r\n\t_getVal: (keys, data) => {\r\n\t\tkeys.split('.').forEach(function(key) {\r\n\t\t\tdata = data[key];\r\n\t\t});\r\n\t\treturn data;\r\n\t},\r\n\r\n\t/**\r\n\t * [设置data中的某项的值，触发set]\r\n\t * @param  {[str]} keys [指令中对应的数据位置]\r\n\t * @param  {[obj]} data [new Single() 参数对象 data]\r\n\t * @param  {[any]} val  [新值]\r\n\t */\r\n\t_setVal: (keys, data, val) => {\r\n\t\tlet _keys = keys.split('.'),\r\n\t\t\tlen = _keys.length - 1;\r\n\t\t_keys.forEach((key, i) => {\r\n\t\t\tif (i == len) {\r\n\t\t\t\tdata[key] = val;\r\n\t\t\t} else {\r\n\t\t\t\tdata = data[key];\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * [upper 指令更新单元]\r\n * @param  {[str]} node \t[绑定节点]\r\n * @param  {[obj]} newVla [新值]\r\n * @param  {[any]} val  \t[原值]\r\n */\r\nconst upper = {\r\n\ttextUpper: (node, newVal, oldVal) => {\r\n\t\tnode.textContent = node.textContent.replace((oldVal ? oldVal : regText), newVal);\r\n\t},\r\n\r\n\thtmlUpper: (node, newVal) => {\r\n\t\tnode.innerHTML = newVal;\r\n\t},\r\n\r\n\tmodelUpper: (node, newVal, val) => {\r\n\t\tnode.value = newVal ? newVal : '';\r\n\t},\r\n\r\n\tclassUpper: (node, newVal, val) => {\r\n\t\tnode.className = (val ?\r\n\t\t\tnode.className.replace(val, newVal) : (node.className + (newVal ? ' ' : '') + newVal)).trim();\r\n\t}\r\n}\r\n\r\nexport function changHtml(html) {\r\n\treturn document.createRange().createContextualFragment(html);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/directive/index.js","import {\r\n\tdirUnit\r\n} from './index.js';\r\nimport {\r\n\tCompile\r\n} from '../compile/index.js';\r\nimport {\r\n\tchangHtml\r\n} from '../directive/index.js';\r\nimport {\r\n\tWatcher\r\n} from '../watcher/index.js';\r\n\r\nexport class ForDir {\r\n\tconstructor(node, vm, keys) {\r\n\t\tthis.start = null;\r\n\t\tthis.end = null;\r\n\t\tthis.init(node, vm, keys);\r\n\t}\r\n\r\n\tinit(node, vm, keys) {\r\n\t\tthis.bind(node, vm, keys);\r\n\t}\r\n\r\n\tbind(node, vm, keys) {\r\n\t\tlet arrName = keys.split('in')[1].trim(),\r\n\t\t\tme = this;\r\n\t\tme.upper(node, vm, keys);\r\n\t\tnew Watcher(vm, arrName, (val, newVal) => {\r\n\t\t\twhile (this.start.nextSibling != this.end) {\r\n\t\t\t\tthis.end.parentNode.removeChild(this.start.nextSibling);\r\n\t\t\t}\r\n\t\t\tme.upper(node, vm, keys);\r\n\t\t});\r\n\t}\r\n\r\n\tupper(node, vm, keys) {\r\n\t\tif (!this.start) {\r\n\t\t\tthis.start = document.createComment('start of s-for');\r\n\t\t\tnode.parentNode.insertBefore(this.start, node);\r\n\t\t}\r\n\t\tif (!this.end) {\r\n\t\t\tthis.end = document.createComment('end of s-for');\r\n\t\t\tnode.parentNode.insertBefore(this.end, node);\r\n\t\t}\r\n\r\n\t\tnode.removeAttribute('s-for');\r\n\t\tlet item = keys.split('in')[0].trim(),\r\n\t\t\tarrName = keys.split('in')[1].trim(),\r\n\t\t\tarr = dirUnit._getVal(arrName, vm.$data),\r\n\t\t\thtml = node.outerHTML,\r\n\t\t\tbox = '';\r\n\t\tfor (let i = 0, len = arr.length; i < len; i++) {\r\n\t\t\tbox += html.replace(item, arrName + '.' + i);\r\n\t\t};\r\n\t\tbox = changHtml(box);\r\n\t\tnew Compile(box, vm);\r\n\t\tthis.end.parentNode.insertBefore(box, this.end);\r\n\r\n\t\tif (node.parentNode) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t}\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/directive/forDir.js","import {\r\n\tdirUnit\r\n} from './index.js';\r\nimport {\r\n\tCompile\r\n} from '../compile/index.js';\r\nimport {\r\n\tchangHtml\r\n} from '../directive/index.js';\r\nimport {\r\n\tWatcher\r\n} from '../watcher/index.js';\r\n\r\nexport class IfDir {\r\n\tconstructor(node, vm, keys) {\r\n\t\tthis.start = null;\r\n\t\tthis.end = null;\r\n\t\tthis.init(node, vm, keys);\r\n\t}\r\n\r\n\tinit(node, vm, keys) {\r\n\t\tthis.bind(node, vm, keys);\r\n\t}\r\n\r\n\tbind(node, vm, keys) {\r\n\t\tlet me = this;\r\n\t\tnew Compile(node,vm);\r\n\t\tme.upper(node, vm, keys,dirUnit._getVal(keys,vm.$data));\r\n\t\tnew Watcher(vm, keys, (newVal, val) => {\r\n\t\t\tif(!!newVal == !!val){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tme.upper(node, vm, keys,newVal);\r\n\t\t});\r\n\t}\r\n\r\n\tupper(node, vm, keys,newVal,val) {\r\n\t\tif (!this.start) {\r\n\t\t\tthis.start = document.createComment('start of s-if');\r\n\t\t\tnode.parentNode.insertBefore(this.start, node);\r\n\t\t}\r\n\t\tif (!this.end) {\r\n\t\t\tthis.end = document.createComment('end of s-if');\r\n\t\t\tnode.parentNode.insertBefore(this.end, node);\r\n\t\t}\r\n\t\tif(node.parentNode) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t}\r\n\t\tif(newVal){\r\n\t\t\tthis.end.parentNode.insertBefore(node,this.end);\r\n\t\t}\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/directive/ifDir.js","\r\nlet jsonpId = 0\r\nexport function ajax(aD) {\r\n\tif (!aD.url) throw new Error('请输入正确的URL!');\r\n\taD.type = aD.type || 'GET';\r\n\taD.async = aD.async || true;\r\n\taD.data = encodeFormat(aD.data);\r\n\taD.url = aD.type == 'POST' ? aD.url : aD.url + (aD.url.indexOf('?') == -1 ? '?' : '&') + aD.data;\r\n\tif (aD.type == 'jsonp') {\r\n\t\tajaxJsonp(aD);\r\n\t\treturn false;\r\n\t}\r\n\tlet re = new XMLHttpRequest;\r\n\tre.open(aD.type, aD.url, aD.async);\r\n\tre.onreadystatechange = function() {\r\n\t\tif (re.readyState == 4 && aD.success) {\r\n\t\t\taD.success(re.response);\r\n\t\t}\r\n\t}\r\n\tre.send(aD.type === 'GET' ? null : aD.data);\r\n}\r\n\r\nfunction encodeFormat(obj) {\r\n\tif (!obj) return '';\r\n\treturn Object.keys(obj).reduce((re, item) => re += '&' + item + '=' + obj[item], '').slice(1);\r\n}\r\n\r\nfunction ajaxJsonp(ao) {\r\n\tif (!ao.jsonp) throw new Error('请输入函数名称');\r\n\tlet fnName = 'jsonp' + '_' + (jsonpId++);\r\n\tao.url = ao.url + ao.jsonp + '=' + fnName;\r\n\tlet script = document.createElement('script');\r\n\tglobal[fnName] = function(response) {\r\n\t\ttry {\r\n\t\t\tao.success(response);\r\n\t\t} finally {\r\n\t\t\tdelete global[fnName];\r\n\t\t\tscript.parentNode.removeChild(script);\r\n\t\t}\r\n\t}\r\n\tscript.src = ao.url;\r\n\tdocument.body.appendChild(script);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ajax/index.js"],"sourceRoot":""}