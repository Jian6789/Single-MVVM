{"version":3,"sources":["webpack:///webpack/bootstrap 86d6732e0e3b4661c2e7","webpack:///./src/main/index.js","webpack:///./src/common/common.js","webpack:///./src/arrInit/index.js","webpack:///./src/observe/index.js","webpack:///./src/dep/index.js","webpack:///./src/compile/index.js","webpack:///./src/directive/index.js","webpack:///./src/watcher/index.js"],"names":["Single","options","$opts","$data","data","$compile","el","document","body","window","isObject","isPlainObj","isArray","isFun","err","isEleNode","isAttrNode","isTextNode","toArray","isDir","isEventDir","val","Object","prototype","toString","call","Array","str","Error","node","nodeType","arr","slice","indexOf","arrayInit","_copy","re","forEach","item","push","_del","index","filter","i","_pop","_shift","length","_insert","result","splice","_push","_unpop","Observe","walk","me","keys","key","convert","value","ob","children","dep","defineProperty","configurable","enumerable","get","addDep","set","newVal","notify","uid","Dep","id","sub","watcher","sun","target","update","Compile","vm","$el","querySelector","analyEleNode","child","childNode","reg","analyArrtNode","test","textContent","text","RegExp","$1","attrs","attributes","attr","dirName","split","dirVal","event","dirUnit","bind","html","class","model","_data","oldVal","_getVal","addEventListener","ev","_setVal","dir","fn","_bind","upper","_keys","len","textUpper","htmlUpper","innerHTML","modelUpper","classUpper","className","replace","Watcher","$vm","$keys","_fn","depIds","getVal","hasOwnProperty","addSub"],"mappings":"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","file":"mvvm.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 86d6732e0e3b4661c2e7","import { err,isFun } from '../common/common.js';\r\nimport { arrayInit } from '../arrInit/index.js';\r\nimport { Observe } from '../observe/index.js';\r\nimport { Compile } from '../compile/index.js';\r\n\r\nexport default class Single {\r\n\tconstructor(options){\r\n\t\tarrayInit();\r\n\t\tthis.$opts = options;\r\n\t\tthis.$data = options.data;\r\n\t\tif(isFun(options)){\r\n\t\t\toptions.data = options.data();\r\n\t\t}\r\n\t\tnew Observe(options.data);\r\n\r\n\t\tthis.$compile = new Compile(options.el || document.body,this);\r\n\t}\r\n}\r\n\r\nwindow.Single = Single;\n\n\n// WEBPACK FOOTER //\n// ./src/main/index.js","\r\n\r\nexport function isObject(val){\r\n\treturn typeof val === 'object';\r\n}\r\n\r\nexport function isPlainObj(val) {\r\n\treturn Object.prototype.toString.call(val) === '[object Object]';\r\n}\r\n\r\nexport function isArray(val) {\r\n\treturn Array.isArray(val);\r\n}\r\n\r\nexport function isFun(val) {\r\n\treturn typeof val === 'function';\r\n}\r\n\r\nexport function err(str) {\r\n\tthrow new Error(str);\r\n}\r\n\r\nexport function isEleNode(node){\r\n\treturn node.nodeType === 1;\r\n}\r\n\r\nexport function isAttrNode(node){\r\n\treturn node.nodeType === 2;\r\n}\r\n\r\nexport function isTextNode(node){\r\n\treturn node.nodeType === 3;\r\n}\r\n\r\nlet arr = [];\r\nlet slice = arr.slice.call;\r\n\r\nexport function toArray(val){\r\n\treturn slice(val);\r\n}\r\n\r\nexport function isDir(str){\r\n\treturn str.indexOf('v-') === 0;\r\n}\r\n\r\nexport function isEventDir(str){\r\n\treturn str.indexOf('on') === 0;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/common/common.js","import { isArray } from '../common/common.js'\r\n\r\nexport let arrayInit = function(){\r\n\tArray.prototype._copy = function(){\r\n\t\tlet re = [];\r\n\t\tthis.forEach((item)=> re.push(item));\r\n\t\treturn re;\r\n\t}\r\n\r\n\tArray.prototype._del = function(index){\r\n\t\treturn this.filter((item,i)=> i !== index);\r\n\t}\r\n\r\n\tArray.prototype._pop = function(){\r\n\t\treturn this._del(0);\r\n\t}\r\n\r\n\tArray.prototype._shift = function(){\r\n\t\treturn this._del(this.length-1);\r\n\t}\r\n\r\n\tArray.prototype._insert = function(index,item){\r\n\t\tlet result = this._copy();\r\n\t\tresult.splice(index,0,item);\r\n\t\treturn result;\r\n\t}\r\n\r\n\tArray.prototype._push = function(item){\r\n\t\treturn this._insert(this.length-1,item);\r\n\t}\r\n\r\n\tArray.prototype._unpop = function(item){\r\n\t\treturn this._insert(0,item);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/arrInit/index.js","import { isObject,isArray } from '../common/common.js';\r\nimport { Dep,target } from '../dep/index.js';\r\n\r\nexport class Observe{\r\n\tconstructor(data){\r\n\t\tif(!isObject(data)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.walk(data);\r\n\t}\r\n\r\n\twalk(data){\r\n\t\tlet me = this;\r\n\t\tObject.keys(data).forEach(function(key){\r\n\t\t\tme.convert(data,key,data[key]);\r\n\t\t});\t\t\r\n\t}\r\n\r\n\tconvert(data,key,value){\r\n\t\tlet ob = this,\r\n\t\t\t\tchildren = new Observe(value),\r\n\t\t\t\tdep = new Dep();\r\n\t\tObject.defineProperty(data,key,{\r\n\t\t\tconfigurable:false,\r\n\t\t\tenumerable:true,\r\n\t\t\tget:function (){\r\n\t\t\t\ttarget && target.addDep(dep);\r\n\t\t\t\treturn value;\r\n\t\t\t},\r\n\t\t\tset:function (newVal) {\r\n\t\t\t\tif(value == newVal){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvalue = newVal;\r\n\t\t\t\tchildren = new Observe(newVal);\r\n\t\t\t\tdep.notify();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/observe/index.js","\r\n\r\nlet uid = 0;\r\nexport class Dep {\r\n\tconstructor() {\r\n\t\tthis.id = uid++;\r\n\t\tthis.sub = [];\r\n\t}\r\n\r\n\taddSub(watcher) {\r\n\t\tthis.sun.push(watcher);\r\n\t}\r\n\r\n\tdepend() {\r\n\t\ttarget.addDep(this);\r\n\t}\r\n\r\n\tnotify() {\r\n\t\tthis.sub.forEach((item) => {\r\n\t\t\titem.update();\r\n\t\t});\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/dep/index.js","import { isEleNode,isTextNode,isDir,isEventDir,toArray } from '../common/common.js';\r\nimport { dirUnit } from '../directive/index.js';\r\n\r\n\r\nexport class Compile{\r\n\tconstructor(el,vm){\r\n\t\tthis.$opts = vm.$opts;\r\n\t\tthis.$data = vm.$opts.data;\r\n\t\tthis.$el = el.nodeType ? el : querySelector(el);\r\n\r\n\t\tif(this.$el){\r\n\t\t\tanalyEleNode(this.$el);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [analyEleNode 并文档中的指令进行解析]\r\n\t * @param  {node} el [ 开始节点（递归） ]\r\n\t * @return {[undefined]}\r\n\t */\r\n\tanalyEleNode(el){\r\n\t\tlet child = el.childNode,\r\n\t\t\t\tme = this,\r\n\t\t\t\treg = /\\{\\{(.+)\\}\\}/;\r\n\t\ttoArray(child).forEach((node)=>{\r\n\t\t\tif(isEleNode(node)){//若为元素节点对其属性节点进行遍历\r\n\t\t\t\tme.analyArrtNode(node);\r\n\t\t\t}else if(isTextNode(node) && reg.test(el.textContent)){\r\n\t\t\t\tdirUnit.text(node,me.$data,RegExp.$1);\r\n\t\t\t}\r\n\t\t\tif(node.childNode && node.childNode.length > -1){\r\n\t\t\t\tme.analyEleNode(node);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * [analyArrtNode 对元素节点的属性进行遍历，找出其中指令]\r\n\t * @param  {[node]} node [需要遍历属性的节点]\r\n\t * @return {[undefined]}\r\n\t */\r\n\tanalyArrtNode(node){\r\n\t\tlet attrs = node.attributes,\r\n\t\t\t\tme = this;\r\n\r\n\t\ttoArray(attrs).forEach((attr)=>{\r\n\t\t\tif(isDir(attr)){\r\n\t\t\t\tlet dirName = attr.split('-')[1],\r\n\t\t\t\t\t\tdirVal = attrs[attr];\r\n\t\t\t\tif(isEventDir(dirName)){\r\n\t\t\t\t\tdirUnit.event(node,me.$opts,dirVal,dirName);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdirUnit[dirName](node,me.$data,dirVal);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/compile/index.js","import { Watcher } from '../watcher/index.js';\r\n\r\n/**\r\n * [dirUnit 指令-数据绑定单元]\r\n * @包含各指令方法 [test | event]\r\n */\r\nexport const dirUnit = {\r\n\r\n\t/**\r\n\t * [v-text指令 \\ {{.+}}绑定数据修改函数]\r\n\t * @param  {[type]} node [需要更新的节点]\r\n\t * @param  {Single} vm   [创建的全局对象]\r\n\t * @param  {[type]} keys [指令中对应的数据位置]\r\n\t */\r\n\ttext: (node, vm, keys) => {\r\n\t\tthis.bind(node, vm, keys, 'text');\r\n\t},\r\n\r\n\t/**\r\n\t * [v-html指令]\r\n\t * @param  {[type]} node [需要更新的节点]\r\n\t * @param  {Single} vm   [创建的全局对象]\r\n\t * @param  {[type]} keys [指令中对应的数据位置]\r\n\t */\r\n\thtml: (node, vm, keys) => {\r\n\t\tthis.bind(node, vm, keys, 'html');\r\n\t},\r\n\r\n\t/**\r\n\t * [v-class指令]\r\n\t * @param  {[type]} node [需要更新的节点]\r\n\t * @param  {Single} vm   [创建的全局对象]\r\n\t * @param  {[type]} keys [指令中对应的数据位置]\r\n\t */\r\n\tclass: (node, vm, keys) => {\r\n\t\tthis.bind(node, vm, keys, 'class');\r\n\t},\r\n\r\n\t/**\r\n\t * [v-model指令]\r\n\t * @param  {[type]} node [需要更新的节点]\r\n\t * @param  {Single} vm   [创建的全局对象]\r\n\t * @param  {[type]} keys [指令中对应的数据位置]\r\n\t */\r\n\tmodel: (node, vm, keys) => {\r\n\t\tthis.bind(node, vm, keys, 'model');\r\n\t\tlet me = this,\r\n\t\t\t_data = vm.$data,\r\n\t\t\toldVal = me._getVal(keys, _data);\r\n\t\tnode.addEventListener('input', (event) => {\r\n\t\t\tlet ev = event || window.event,\r\n\t\t\t\tval = ev.target.value;\r\n\t\t\tif (val == oldVal) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tme._setVal(keys, _data, val);\r\n\r\n\t\t}, true);\r\n\t},\r\n\r\n\t/**\r\n\t * [v-on:ev 事件指令]\r\n\t * @param  {[type]} node   [需要更新的节点]\r\n\t * @param  {[type]} vm     [创建的全局对象]\r\n\t * @param  {[type]} dirVal [指令中的值]\r\n\t * @param  {[type]} dir    [指令名]\r\n\t */\r\n\tevent: (node, vm, dirVal, dir) => {\r\n\t\tlet ev = dir.split(':')[1],\r\n\t\t\tfn = vm.$opts.event[dirVal];\r\n\t\tif (isFun(fn)) {\r\n\t\t\tnode.addEventListener(ev, fn.bind(vm), false);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * [将节点值与数据进行绑定，当数据修改时，遍历该数据所有订阅者dep.sub，调用 Watcher 中的匿名函数]\r\n\t * @param  {[type]} node [需要更新的节点]\r\n\t * @param  {[type]} vm   [创建的全局对象]\r\n\t * @param  {[type]} keys [指令中对应的数据位置]\r\n\t * @param  {[type]} dir  [指令名]\r\n\t */\r\n\t_bind: (node, vm, keys, dir) => {\r\n\t\tlet fn = upper[dir + 'Upper'];\r\n\t\tisFun(fn) && fn(node, _getVal(keys, vm.$data));\r\n\r\n\t\tnew Watcher(vm, keys, (val, newVal) => {\r\n\t\t\tisFun(fn) && fn(node, newVal, val);\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * [根据指令值获取绑定的数据值]\r\n\t * @param  {[str]} keys [指令中对应的数据位置]\r\n\t * @param  {[obj]} val  [数据所在位置 / 数据]\r\n\t */\r\n\t_getVal: (keys, data) => {\r\n\t\tkeys.split(',').forEach(function(key) {\r\n\t\t\tdata = data[key];\r\n\t\t});\r\n\t\treturn data;\r\n\t},\r\n\r\n\t/**\r\n\t * [设置data中的某项的值，触发set]\r\n\t * @param  {[str]} keys [指令中对应的数据位置]\r\n\t * @param  {[obj]} data [new Single() 参数对象 data]\r\n\t * @param  {[any]} val  [新值]\r\n\t */\r\n\t_setVal: (keys, data, val) => {\r\n\t\tlet _keys = keys.split(','),\r\n\t\t\t\tlen = _keys.length - 1;\r\n\t\t_keys.forEach((key, i) => {\r\n\t\t\tif (i == len) {\r\n\t\t\t\tdata[key] = val;\r\n\t\t\t} else {\r\n\t\t\t\tdata = data[key];\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * [upper 指令更新单元]\r\n * @param  {[str]} node \t[绑定节点]\r\n * @param  {[obj]} newVla [新值]\r\n * @param  {[any]} val  \t[原值]\r\n */\r\nconst upper = {\r\n\ttextUpper: (node, newVal) => {\r\n\t\tnode.textContent = newVal;\r\n\t},\r\n\r\n\thtmlUpper: (node, newVal) => {\r\n\t\tnode.innerHTML = newVal;\r\n\t},\r\n\r\n\tmodelUpper: (node, newVal, val) => {\r\n\t\tnode.value = newVal ? newVal : '';\r\n\t},\r\n\r\n\tclassUpper: (node, newVal, val) => {\r\n\t\tnode.className = val ?\r\n\t\t\tnode.className.replace(val, newVal) : (node.className + newVal);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/directive/index.js","\r\n\r\nexport let target = null;\r\n\r\nexport class Watcher{\r\n\tconstructor(vm,keys,fn){\r\n\t\tthis.$vm = vm;\r\n\t\tthis.$keys = keys;\r\n\t\tthis._fn = fn;\r\n\t\tthis.depIds = {};\r\n\t\tthis.val = this.get();\r\n\t}\r\n\r\n\tget(){\r\n\t\ttarget = this;\r\n\t\tlet val = this.getVal();\r\n\t\ttarget = null;\r\n\t\treturn val;\r\n\t}\r\n\r\n\tgetVal(){\r\n\t\tlet keys = this.$keys.split(','),\r\n\t\t\t\tval = this.$vm.$data;\r\n\t\tkeys.forEach((key) => {\r\n\t\t\tval = val[key];\r\n\t\t});\r\n\t\treturn val;\r\n\t}\r\n\r\n\taddDep(dep){\r\n\t\tif(!this.depIds.hasOwnProperty(dep.id)){\r\n\t\t\tthis.depIds[dep.id] = dep;\r\n\t\t\tdep.addSub(this);\r\n\t\t}\r\n\t}\r\n\r\n\tupdate(){\r\n\t\tlet newVal = this.get(),\r\n\t\t\t\tval = this.val;\r\n\t\tif(val == newVal){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.val = newVal;\r\n\t\tthis._fn.call(this.$vm,val,newVal);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/watcher/index.js"],"sourceRoot":""}